cmake_minimum_required(VERSION 2.7)
set(CMAKE_VERBOSE_MAKEFILE ON)
project(sdrberry)
file(GLOB_RECURSE SOURCES ./lvgl/src/*.c)
set(LIBRARIES_FROM_REFERENCES -lpthread -lbluetooth -lSoapySDR -latomic -ltinyb -lrtaudio -lliquid -lasound -lfftw3 -Wl,-verbose)
include_directories(lvgl ft8)
add_executable(sdrberry sdrberry.cpp FT8Demodulator.cpp FT8Demodulator.h HidDev.cpp HidDev.h PeakLevelDetector.cpp PeakLevelDetector.h ft8/fft.cpp ft8/fft.h ft8/ft8.cpp ft8/ft8.h ft8/libldpc.cpp ft8/unpack.cpp ft8/util.cpp ft8/osd.cpp ft8/arrays.h gui_ft8.cpp gui_ft8.h FMDemodulator.cpp Agc_class.cpp AMDemodulator.cpp AMModulator.cpp AudioInput.cpp AudioOutput.cpp BandFilter.cpp ble_interface.cpp Catinterface.cpp configfile.cpp configoption.cpp Demodulator.cpp Filter.cpp FmDecode.cpp FMDemodulator.cpp FMModulator.cpp FreeSansOblique24.c FreeSansOblique32.c FreeSansOblique42.c FT891_CAT.cpp gui_agc.cpp Gui_band.cpp gui_bar.cpp gui_setup.cpp gui_top_bar.cpp gui_tx.cpp gui_vfo.cpp Keyboard.cpp MidiControle.cpp Mouse.cpp PCF8574.cpp RtMidi.cpp SdrDevice.cpp sdrstream.cpp Settings.cpp vfo.cpp Waterfall.cpp wiringPiI2C.c wiringSerial.c lv_drivers/display/fbdev.c lv_drivers/indev/evdev.c lv_drivers/indev/mouse.c Agc_class.h AMDemodulator.h AMModulator.h Audiodefs.h AudioInput.h AudioOutput.h BandFilter.h ble_interface.h Catinterface.h configfile.h configoption.h DataBuffer.h Demodulator.h Filter.h FmDecode.h FMDemodulator.h FMModulator.h FT891_CAT.h gattlib.h gui_agc.h Gui_band.h gui_bar.h gui_setup.h gui_top_bar.h gui_tx.h gui_vfo.h Keyboard.h liquid.h liquid.internal.h lv_conf.h lv_drv_conf.h MidiControle.h Mouse.h PCF8574.h RtAudio.h RtMidi.h sdrberry.h SdrDevice.h sdrstream.h Settings.h vfo.h Waterfall.h wiringPiI2C.h wiringSerial.h strlib.cpp strlib.h MorseDecoder.cpp MorseDecoder.h FreeSans42.c ${SOURCES} lv_drivers/indev/evdev.h)
target_compile_definitions(sdrberry PRIVATE __LINUX_ALSA__ LV_LVGL_H_INCLUDE_SIMPLE)
target_compile_options(sdrberry PRIVATE)
target_include_directories(sdrberry PRIVATE /usr/local/include/liquid)
set_property(TARGET sdrberry PROPERTY CXX_STANDARD 17)
target_link_libraries(sdrberry "${LIBRARIES_FROM_REFERENCES}")
install(TARGETS sdrberry DESTINATION /usr/local/bin)
