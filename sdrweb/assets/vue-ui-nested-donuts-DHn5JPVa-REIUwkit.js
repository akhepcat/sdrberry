import{z as Ze,c as g,r as d,D as ea,R as aa,A as J,H as ta,w as Oe,B as la,C as V,b as oa,ac as sa,E as ua,ak as Ve,Q as na,F as De,G as L,K as ra,V as ia,N as da,o as s,a as n,i as z,L as c,j as va,l as m,m as x,p as B,q as G,u as i,M as ne,n as P,J as ca,f as Me,e as b,P as w,k as _,S as ha,T as ya,O as Ye,h as T,am as pa,Y as re,$ as D,U as R,a2 as Be,a3 as fa,g as K}from"./index-CMbgrvzv.js";import{O as ba,k as ga}from"./useResponsive-CoxXLe23-CoJWR8uA.js";import{x as ma}from"./Title-DyD-mBPN-B9325m01.js";import{r as xa,a as $a}from"./usePrinter-CLcxWv-4-ChR9zFwY.js";import{W as ka}from"./DataTable-D8fcY_sJ-zOi5rFAi.js";import{E as wa}from"./Tooltip-qod9o4Vz-BM0Op7V-.js";import{C as La}from"./Legend-BorSDXCj-om-7gt85.js";import Ca from"./vue-ui-skeleton-Dgzcn3FL-nxJtxydg.js";import Ia from"./vue-ui-accordion-m8rut1bP-BPULaFJJ.js";import{c as Ge}from"./useNestedProp-BxrcwmTZ-DfxG55sS.js";import{p as _a}from"./PackageVersion-mSsg8dpu-CbvTnp2w.js";import{S as Fa}from"./PenAndPaper-Dk41ZrJ0-Cv0BF8yJ.js";import{s as Ta}from"./vue-data-ui-DF7u-eZV-DHaDTFza.js";import"./Shape-DYFnvMNd-6AEzh47f.js";const ie=M=>(ha("data-v-038450b3"),M=M(),ya(),M),Na=["id"],Aa=["xmlns","viewBox"],Sa=["id"],za=ie(()=>b("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),Pa=["offset","stop-color"],Oa=["offset","stop-opacity"],Va=ie(()=>b("stop",{offset:"100%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),Da=["id"],Ma=["id"],Ya=ie(()=>b("feColorMatrix",{type:"saturate",values:"0"},null,-1)),Ba=["id"],Ga=["flood-color"],Ra=["d","fill","stroke","stroke-width","filter"],Ua={key:0},Ea=["d","fill"],Ha={key:1},Wa=["x","y","font-size","font-weight","fill"],Xa={key:2},ja=["filter"],qa=["text-anchor","x","y","fill","font-size","font-weight"],Ja=["text-anchor","x","y","fill","font-size","font-weight"],Ka=["text-anchor","x","y","fill","font-size","font-weight"],Qa=["d","fill","onMouseenter","onClick"],Za={key:5,class:"vue-data-ui-watermark"},et={key:0,class:"vue-ui-nested-donuts-legend-title"},at=["onClick"],tt=["innerHTML"],lt={__name:"vue-ui-nested-donuts",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(M,{expose:Re,emit:de}){const N=M,{vue_ui_nested_donuts:Ue}=Ze(),U=g(()=>!!N.dataset&&N.dataset.length),$=d(ea()),Q=d(!1),Z=d(""),Ee=d(null),ve=d(0),O=d(null),ce=d(null),ee=d(null),he=d(null),ye=d(null),pe=d(0),fe=d(0),be=d(0),Y=d(!1);function He(a){Y.value=a,ve.value+=1}const e=g({get:()=>ge(),set:a=>a});function ge(){const a=Ge({userConfig:N.config,defaultConfig:Ue});return a.theme?{...Ge({userConfig:ta.vue_ui_nested_donuts[a.theme]||N.config,defaultConfig:a}),customPalette:aa[a.theme]||J}:a}Oe(()=>N.config,a=>{e.value=ge(),me(),pe.value+=1,fe.value+=1,be.value+=1},{deep:!0});const E=d(null);oa(()=>{me()});function me(){if(la(N.dataset)&&V({componentName:"VueUiNestedDonuts",type:"dataset"}),e.value.responsive){const a=ba(()=>{const{width:u,height:l}=ga({chart:O.value,title:e.value.style.chart.title.text?ce.value:null,legend:e.value.style.chart.legend.show?ee.value:null,source:he.value,noTitle:ye.value});p.value.width=u,p.value.height=l});E.value=new ResizeObserver(a),E.value.observe(O.value.parentNode)}}sa(()=>{E.value&&E.value.disconnect()});const{isPrinting:xe,isImaging:$e,generatePdf:ke,generateImage:we}=xa({elementId:`nested_donuts_${$.value}`,fileName:e.value.style.chart.title.text||"vue-ui-nested-donuts"}),We=g(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),Xe=g(()=>ua(e.value.customPalette)),k=d({dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}),p=d({height:512,width:512});function je({datapoint:a,index:u}){de("selectDatapoint",{datapoint:a,index:u})}const f=d([]),C=g(()=>(N.dataset.forEach((a,u)=>{[null,void 0].includes(a.name)&&V({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:u}),[null,void 0].includes(a.series)?V({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"series",index:u}):a.series.length===0?V({componentName:"VueUiNestedDonuts",type:"datasetAttributeEmpty",property:`series at index ${u}`}):a.series.forEach((l,o)=>{[null,void 0].includes(l.name)&&V({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:o,key:"serie"}),[null,void 0].includes(l.values)&&V({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"values",index:o,key:"serie"})})}),N.dataset.map((a,u)=>({...a,total:a.series.filter(l=>!f.value.includes(l.id)).map(l=>Ve(l.values).reduce((o,t)=>o+t,0)).reduce((l,o)=>l+o,0),datasetIndex:u,id:`${$.value}_${u}`,series:a.series.map((l,o)=>({name:l.name,arcOf:a.name,arcOfId:`${$.value}_${u}`,id:`${$.value}_${u}_${o}`,seriesIndex:o,datasetIndex:u,color:na(l.color)||Xe.value[o]||J[o]||J[o%J.length],value:Ve(l.values).reduce((t,v)=>t+v,0),absoluteValues:l.values||[]}))})))),I=g(()=>Math.min(p.value.height,p.value.width)*(e.value.style.chart.layout.donut.strokeWidth/512)),Le=g(()=>[...C.value].map((a,u)=>{const l=a.series.filter(o=>!f.value.includes(o.id)).map(o=>o.value).reduce((o,t)=>o+t,0);return{...a,total:l,series:a.series.filter(o=>!f.value.includes(o.id)).map(o=>({...o,proportion:o.value/l}))}}));function qe(a,u,l){let o=0;for(let t=0;t<a.length;t+=1)l.includes(a[t])&&(o+=1);return o<u}const h=d(Le.value);Oe(()=>Le.value,a=>h.value=a);const Ce=d(null),Ie=d(null);function ae(a){de("selectLegend",a);const u=C.value.flatMap(r=>r.series).find(r=>r.id===a.id),l=h.value.flatMap(r=>r.series).find(r=>r.id===a.id);let o=l?l.value:0;const t=C.value.find(r=>r.id===u.arcOfId).series.map(r=>r.id),v=qe(t,t.length-1,f.value);if(f.value.includes(a.id)){let r=function(){o>u.value?(cancelAnimationFrame(Ce.value),h.value=h.value.map(y=>({...y,series:y.series.map(F=>F.id==a.id?{...F,value:u.value}:F)}))):(o+=u.value*.025,h.value=h.value.map(y=>({...y,series:y.series.map(F=>F.id===a.id?{...F,value:o}:F)})),Ce.value=requestAnimationFrame(r))};f.value=f.value.filter(y=>y!==a.id),r()}else if(v){let r=function(){o<.1?(cancelAnimationFrame(Ie.value),f.value.push(a.id),h.value=h.value.map((y,F)=>({...y,series:y.series.map(S=>S.id===a.id?{...S,value:0}:S)}))):(o/=1.1,h.value=h.value.map((y,F)=>({...y,series:y.series.map(S=>S.id===a.id?{...S,value:o}:S)})),Ie.value=requestAnimationFrame(r))};r()}}const te=g(()=>I.value/C.value.length*e.value.style.chart.layout.donut.spacingRatio),_e=g(()=>h.value.map((a,u)=>I.value-u*I.value/C.value.length)),H=g(()=>h.value.map((a,u)=>{const l=u*I.value/C.value.length;return{...a,radius:I.value-l,donut:De({series:a.series},p.value.width/2,p.value.height/2,I.value-l,I.value-l,1.99999,2,1,360,105.25,te.value)}})),Fe=g(()=>[...C.value].map((a,u)=>{const l=u*I.value/C.value.length;return{sizeRatio:l,donut:De({series:[{value:1}]},p.value.width/2,p.value.height/2,I.value-l,I.value-l,1.99999,2,1,360,105.25,I.value/C.value.length*e.value.style.chart.layout.donut.spacingRatio)[0]}})),Te=d(null),W=d(null),X=d(null),le=d(null);function Je({datapoint:a,_relativeIndex:u,seriesIndex:l}){Te.value=a.arcOfId,W.value=a.id,X.value=l,le.value={datapoint:a,seriesIndex:l,series:h.value,config:e.value};const o=e.value.style.chart.tooltip.customFormat;if(Be(o)&&fa(()=>o({seriesIndex:l,datapoint:a,series:h.value,config:e.value})))Z.value=o({seriesIndex:l,datapoint:a,series:h.value,config:e.value});else{let t="";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&f.value.length===0){const v=h.value.map(r=>r.series.find(y=>y.seriesIndex===l));v.forEach((r,y)=>{if(!r)return"";t+=`
                    <div style="display:flex; flex-direction: column; justify-content:flex-start; align-items:flex-start;padding:6px 0; ${y<v.length-1?`border-bottom:1px solid ${e.value.style.chart.tooltip.borderColor}`:""}">
                        <div style="display:flex; flex-direction: row; gap: 3px; justify-content:flex-start; align-items:center;">
                            <svg viewBox="0 0 20 20" height="${e.value.style.chart.tooltip.fontSize}" width="${e.value.style.chart.tooltip.fontSize}">
                                <circle cx="10" cy="10" r="10" fill="${r.color}"/>
                            </svg>
                            <span>
                                ${r.arcOf??""} - ${r.name}
                            </span>
                        </div>
                        <span>
                            ${e.value.style.chart.tooltip.showValue?`<b>${R(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:l})}
                        </b>`:""}
                            ${e.value.style.chart.tooltip.showPercentage?`(${L({v:r.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})})`:""}
                        </span>
                    </div>
                `})}else t+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${e.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${a.arcOf??""} - ${a.name}</div>`,t+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="${a.color}"/></svg>`,e.value.style.chart.tooltip.showValue&&(t+=`<b>${R(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:l})}</b>`),e.value.style.chart.tooltip.showPercentage&&(e.value.style.chart.tooltip.showValue?t+=`<span>(${L({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})})</span></div>`:t+=`<b>${L({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})}</b></div>`);Z.value=`<div style="font-size:${e.value.style.chart.tooltip.fontSize}px">${t}</div>`}Q.value=!0}function oe(a){return a.proportion*100>e.value.style.chart.layout.labels.dataLabels.hideUnderValue}function Ne(a,u){if(!e.value.useBlurOnHover)return"";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&f.value.length===0)return[null,void 0].includes(X.value)||X.value===u?"":`url(#blur_${$.value})`;if(!e.value.style.chart.tooltip.showAllItemsAtIndex||f.value.length)return[null,void 0].includes(W.value)||W.value===a.id?"":`url(#blur_${$.value})`}const se=g(()=>C.value.map((a,u)=>a.series.map((l,o)=>({name:l.name,color:l.color,value:l.value,shape:"circle",arcOf:l.arcOf,id:l.id,seriesIndex:o,datasetIndex:u,total:a.series.filter(t=>!f.value.includes(t.id)).map(t=>t.value).reduce((t,v)=>t+v,0)})).map(l=>({...l,opacity:f.value.includes(l.id)?.5:1,segregate:()=>ae(l),isSegregated:f.value.includes(l.id)})))),Ke=g(()=>({cy:"nested-donuts-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),A=g(()=>{const a=h.value.flatMap(l=>l.series.map(o=>({name:`${l.name} - ${o.name}`,color:o.color,total:l.total}))),u=h.value.flatMap(l=>l.series.map(o=>o.value));return{head:a,body:u}});function Ae(){ra(()=>{const a=A.value.head.map((o,t)=>[[o.name],[A.value.body[t]],[isNaN(A.value.body[t]/o.total)?"-":A.value.body[t]/o.total*100]]),u=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(a),l=ia(u);da({csvContent:l,title:e.value.style.chart.title.text||"vue-ui-nested-donuts"})})}const j=g(()=>{const a=[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],u=A.value.head.map((o,t)=>{const v=L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:A.value.body[t],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue});return[{color:o.color,name:o.name},v,isNaN(A.value.body[t]/o.total)?"-":L({v:A.value.body[t]/o.total*100,s:"%",r:e.value.table.td.roundingPercentage})]}),l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],head:a,body:u,config:l}});function Qe(){return C.value}function Se(){k.value.showTable=!k.value.showTable}function ze(){k.value.dataLabels.show=!k.value.dataLabels.show}function Pe(){k.value.showTooltip=!k.value.showTooltip}const q=d(!1);function ue(){q.value=!q.value}return Re({getData:Qe,generatePdf:ke,generateCsv:Ae,generateImage:we,toggleTable:Se,toggleLabels:ze,toggleTooltip:Pe,toggleAnnotator:ue}),(a,u)=>(s(),n("div",{ref_key:"nestedDonutsChart",ref:O,class:P(`vue-ui-nested-donuts ${Y.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:ne(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;background:${e.value.style.chart.backgroundColor}`),id:`nested_donuts_${$.value}`},[e.value.userOptions.buttons.annotator?(s(),z(Fa,{key:0,parent:O.value,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:q.value,onClose:ue},null,8,["parent","backgroundColor","color","active"])):c("",!0),We.value?(s(),n("div",{key:1,ref_key:"noTitle",ref:ye,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):c("",!0),e.value.style.chart.title.text?(s(),n("div",{key:2,ref_key:"chartTitle",ref:ce},[(s(),z(ma,{key:`title_${pe.value}`,config:{title:{cy:"donut-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):c("",!0),e.value.userOptions.show&&U.value?(s(),z($a,{ref:"details",key:`user_option_${ve.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:i(xe),isImaging:i($e),uid:$.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:Y.value,isTooltip:k.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:O.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:q.value,onToggleFullscreen:He,onGeneratePdf:i(ke),onGenerateCsv:Ae,onGenerateImage:i(we),onToggleTable:Se,onToggleLabels:ze,onToggleTooltip:Pe,onToggleAnnotator:ue},va({_:2},[a.$slots.optionTooltip?{name:"optionTooltip",fn:m(()=>[x(a.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:m(()=>[x(a.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:m(()=>[x(a.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:m(()=>[x(a.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:m(()=>[x(a.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:m(()=>[x(a.$slots,"optionLabels",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:m(({toggleFullscreen:l,isFullscreen:o})=>[x(a.$slots,"optionFullscreen",B(G({toggleFullscreen:l,isFullscreen:o})),void 0,!0)]),key:"6"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:m(({toggleAnnotator:l,isAnnotator:o})=>[x(a.$slots,"optionAnnotator",B(G({toggleAnnotator:l,isAnnotator:o})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasTable","hasLabel","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):c("",!0),U.value?(s(),n("svg",{key:4,xmlns:i(ca),class:P({"vue-data-ui-fullscreen--on":Y.value,"vue-data-ui-fulscreen--off":!Y.value}),viewBox:`0 0 ${p.value.width<=0?.001:p.value.width} ${p.value.height<0?.001:p.value.height}`,style:ne(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[Me(_a),b("defs",null,[(s(!0),n(w,null,_(Fe.value,(l,o)=>(s(),n("radialGradient",{id:`radial_${$.value}_${o}`},[za,b("stop",{offset:`${(1-te.value/_e.value[o])*100}%`,"stop-color":i(Ye)("#FFFFFF",0),"stop-opacity":"0"},null,8,Pa),b("stop",{offset:`${(1-te.value/_e.value[o]/2)*100}%`,"stop-color":"#FFFFFF","stop-opacity":e.value.style.chart.gradientIntensity/100},null,8,Oa),Va],8,Sa))),256))]),b("defs",null,[b("filter",{id:`blur_${$.value}`,x:"-50%",y:"-50%",width:"200%",height:"200%"},[b("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2,id:`blur_std_${$.value}`},null,8,Ma),Ya],8,Da),b("filter",{id:`shadow_${$.value}`,"color-interpolation-filters":"sRGB"},[b("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10","flood-opacity":"0.5","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,Ga)],8,Ba)]),(s(!0),n(w,null,_(H.value,(l,o)=>(s(),n("g",null,[(s(!0),n(w,null,_(l.donut,(t,v)=>(s(),n("g",null,[b("path",{class:"vue-ui-donut-arc-path",d:t.arcSlice,fill:i(Ye)(t.color,80),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:Ne(t,v)},null,8,Ra)]))),256))]))),256)),e.value.style.chart.useGradient?(s(),n("g",Ua,[(s(!0),n(w,null,_(Fe.value,(l,o)=>(s(),n("g",null,[b("path",{d:l.donut.arcSlice,fill:`url(#radial_${$.value}_${o})`,stroke:"transparent","stroke-width":"0"},null,8,Ea)]))),256))])):c("",!0),e.value.style.chart.layout.labels.dataLabels.showDonutName?(s(),n("g",Ha,[(s(!0),n(w,null,_(H.value,(l,o)=>(s(),n("g",null,[(s(!0),n(w,null,_(l.donut,(t,v)=>(s(),n("g",null,[v===0&&p.value.width&&p.value.height?(s(),n("text",{key:0,class:P({animated:e.value.useCssAnimation}),x:p.value.width/2,y:t.startY-e.value.style.chart.layout.labels.dataLabels.fontSize+e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY,"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color},T(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?i(pa)({source:l.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):l.name),11,Wa)):c("",!0)]))),256))]))),256))])):c("",!0),e.value.style.chart.layout.labels.dataLabels.show?(s(),n("g",Xa,[(s(!0),n(w,null,_(H.value,(l,o)=>(s(),n("g",null,[(s(!0),n(w,null,_(l.donut,(t,v)=>(s(),n("g",{filter:Ne(t,v)},[oe(t)&&k.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage?(s(),n("text",{key:0,class:P({animated:e.value.useCssAnimation}),"text-anchor":i(D)(t,!0).anchor,x:i(D)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(re)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldPercentage?"bold":"normal"},T(i(L)({v:t.proportion*100,s:"%",r:e.value.style.chart.layout.labels.dataLabels.roundingPercentage})),11,qa)):c("",!0),oe(t)&&k.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue?(s(),n("text",{key:1,class:P({animated:e.value.useCssAnimation}),"text-anchor":i(D)(t,!0).anchor,x:i(D)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(re)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY)+e.value.style.chart.layout.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"}," ("+T(i(R)(e.value.style.chart.layout.labels.dataLabels.formatter,t.value,i(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:t,seriesIndex:o,datapointIndex:v}))+") ",11,Ja)):c("",!0),oe(t)&&k.value.dataLabels.show&&!e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue?(s(),n("text",{key:2,class:P({animated:e.value.useCssAnimation}),"text-anchor":i(D)(t,!0).anchor,x:i(D)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(re)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"},T(i(R)(e.value.style.chart.layout.labels.dataLabels.formatter,t.value,i(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:t,seriesIndex:o,datapointIndex:v})),11,Ka)):c("",!0)],8,ja))),256))]))),256))])):c("",!0),(s(!0),n(w,null,_(H.value,(l,o)=>(s(),n("g",null,[(s(!0),n(w,null,_(l.donut,(t,v)=>(s(),n("g",null,[b("path",{"data-cy-donut-trap":"",d:t.arcSlice,fill:Ee.value===o?"rgba(0,0,0,0.1)":"transparent",onMouseenter:r=>Je({datapoint:t,seriesIndex:t.seriesIndex}),onClick:r=>je({datapoint:t,index:v}),onMouseleave:u[0]||(u[0]=r=>{Q.value=!1,Te.value=null,W.value=null,X.value=null})},null,40,Qa)]))),256))]))),256)),x(a.$slots,"svg",{svg:p.value},void 0,!0)],14,Aa)):c("",!0),a.$slots.watermark?(s(),n("div",Za,[x(a.$slots,"watermark",B(G({isPrinting:i(xe)||i($e)})),void 0,!0)])):c("",!0),U.value?c("",!0):(s(),z(Ca,{key:6,config:{type:"donut",style:{backgroundColor:e.value.style.chart.backgroundColor,donut:{color:"#CCCCCC"}}}},null,8,["config"])),Me(wa,{show:k.value.showTooltip&&Q.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:O.value,content:Z.value,isCustom:i(Be)(e.value.style.chart.tooltip.customFormat)},{"tooltip-before":m(()=>[x(a.$slots,"tooltip-before",B(G({...le.value})),void 0,!0)]),"tooltip-after":m(()=>[x(a.$slots,"tooltip-after",B(G({...le.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isCustom"]),e.value.style.chart.legend.show?(s(),n("div",{key:7,ref_key:"chartLegend",ref:ee,class:P({"vue-ui-nested-donuts-legend":se.value.length>1})},[(s(!0),n(w,null,_(se.value,(l,o)=>(s(),z(La,{key:`legend_${o}_${be.value}`,legendSet:l,config:Ke.value,onClickMarker:u[1]||(u[1]=({legend:t})=>ae(t))},{legendTitle:m(({titleSet:t})=>[t[0]&&t[0].arcOf?(s(),n("div",et,T(t[0].arcOf),1)):c("",!0)]),item:m(({legend:t,index:v})=>[b("div",{onClick:r=>ae(t),style:ne(`opacity:${f.value.includes(t.id)?.5:1}`)},[K(T(t.name)+": "+T(i(R)(e.value.style.chart.layout.labels.dataLabels.formatter,t.value,i(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:t,seriesIndex:v}))+" ",1),f.value.includes(t.id)?(s(),n(w,{key:1},[K(" ( - % ) ")],64)):(s(),n(w,{key:0},[K(" ("+T(isNaN(t.value/t.total)?"-":i(L)({v:t.value/t.total*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}))+") ",1)],64))],12,at)]),_:2},1032,["legendSet","config"]))),128))],2)):c("",!0),e.value.style.chart.legend.show?c("",!0):(s(),n("div",{key:8,ref_key:"chartLegend",ref:ee},[x(a.$slots,"legend",{legend:se.value},void 0,!0)],512)),a.$slots.source?(s(),n("div",{key:9,ref_key:"source",ref:he,dir:"auto"},[x(a.$slots,"source",{},void 0,!0)],512)):c("",!0),U.value?(s(),z(Ia,{key:10,hideDetails:"",config:{open:k.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:m(()=>[(s(),z(ka,{key:`table_${fe.value}`,colNames:j.value.colNames,head:j.value.head,body:j.value.body,config:j.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:u[2]||(u[2]=l=>k.value.showTable=!1)},{th:m(({th:l})=>[b("div",{innerHTML:l,style:{display:"flex","align-items":"center"}},null,8,tt)]),td:m(({td:l})=>[K(T(l.name||l),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):c("",!0)],14,Na))}},gt=Ta(lt,[["__scopeId","data-v-038450b3"]]);export{gt as default};
