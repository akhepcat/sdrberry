import{z as xt,c as m,r as g,D as De,b as Je,B as kt,C as Ge,Z as wt,R as zt,A as re,H as Ct,ao as Ue,Q as Lt,E as $t,w as qe,aP as ie,aN as Xe,ad as Ye,V as Mt,N as St,o as r,a as u,i as J,L as c,m as k,f as ue,j as _t,l as z,p as H,q as B,u as L,M as G,J as Nt,P as d,k as f,e as E,I as Tt,n as ye,h as M,ag as Ke,U as Ze,G as W,a2 as Qe,a3 as It,g as Rt}from"./index-DIL_pLmJ.js";import{c as et}from"./useNestedProp-BxrcwmTZ-1Bk3HyKT.js";import{O as Vt,k as At}from"./useResponsive-CoxXLe23-CoJWR8uA.js";import{r as Ot,a as Pt}from"./usePrinter-CLcxWv-4-CCDxi2Mm.js";import{U as Ft}from"./Slicer-BLQZ4Fne-Bv0OdlWB.js";import{E as Ht}from"./Tooltip-qod9o4Vz-Dsvb9C65.js";import{x as Bt}from"./Title-DyD-mBPN-CHqvPevn.js";import{C as Et}from"./Legend-BorSDXCj-Cb5_Z7Gi.js";import Wt from"./vue-ui-accordion-m8rut1bP-DBR24duA.js";import{W as jt}from"./DataTable-D8fcY_sJ-By-GDpuN.js";import Dt from"./vue-ui-skeleton-Dgzcn3FL-BNvPX0g2.js";import{p as Jt}from"./PackageVersion-mSsg8dpu-BxnQ4_xj.js";import{S as Gt}from"./PenAndPaper-Dk41ZrJ0-D5uht0-m.js";import{s as Ut}from"./vue-data-ui-DF7u-eZV-hcmE5A1B.js";import"./Shape-DYFnvMNd-DLTmTYE_.js";const qt=["id"],Xt=["xmlns","viewBox"],Yt={key:0},Kt=["id"],Zt=["stop-color"],Qt=["stop-color"],ea=["stop-color"],ta=["x1","x2","y1","y2","stroke"],aa=["x1","x2","y1","y2","stroke"],la=["x1","x2","y1","y2","stroke"],oa=["x1","x2","y1","y2","stroke"],sa=["x","y","height","rx","width","fill","stroke","stroke-width"],ra=["x","y","width","rx","height","fill","stroke","stroke-width"],ia=["x1","x2","y1","y2","stroke","stroke-width"],ua=["x1","x2","y1","y2","stroke","stroke-width"],na=["x","y","font-size","fill","font-weight"],va=["transform","font-size","fill","font-weight"],ca=["x","y","font-size","fill","font-weight"],da={key:0},ha=["x","y","font-size","font-weight","fill"],ya=["x","y","font-size","fill","font-weight"],ga={key:0},ba=["x","y","font-size","font-weight","fill"],fa=["x1","x2","y1","y2","stroke"],pa=["x","y","font-size","font-weight","fill"],ma=["x1","x2","y1","y2","stroke"],xa=["font-size","font-weight","fill","text-anchor","transform"],ka=["text-anchor","font-size","font-weight","fill","transform"],wa=["font-size","font-weight","fill","x","y"],za=["x","y","width","height","onClick","onMouseenter","fill"],Ca=["x","y","width","height","onClick","onMouseenter","fill"],La={key:4,class:"vue-data-ui-watermark"},$a=["onClick"],Ma=["innerHTML"],Sa={__name:"vue-ui-stackbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectDatapoint","selectLegend"],setup(ge,{expose:tt,emit:be}){const x=ge,{vue_ui_stackbar:at}=xt(),j=m({get(){return!!x.dataset&&x.dataset.length},set(a){return a}}),D=g(null),ne=g(De()),Q=g(!1),fe=g(null),ve=g(""),$=g([]),pe=g(0),me=g(null),xe=g(null),ke=g(null),we=g(null),ze=g(0),ce=g(!1),U=g(null),q=g(!1),lt=g(0),ot=g(0),st=g(0);Je(()=>{de()});const e=m({get:()=>Ce(),set:a=>a});function Ce(){const a=et({userConfig:x.config,defaultConfig:at});let o={};return a.theme?o={...et({userConfig:Ct.vue_ui_stackbar[a.theme]||x.config,defaultConfig:a}),customPalette:zt[a.theme]||re}:o=a,x.config&&Ue(x.config,"style.chart.grid.scale.scaleMin")?o.style.chart.grid.scale.scaleMin=x.config.style.chart.grid.scale.scaleMin:o.style.chart.grid.scale.scaleMin=null,x.config&&Ue(x.config,"style.chart.grid.scale.scaleMax")?o.style.chart.grid.scale.scaleMax=x.config.style.chart.grid.scale.scaleMax:o.style.chart.grid.scale.scaleMax=null,o}qe(()=>x.config,a=>{e.value=Ce(),de(),lt.value+=1,ot.value+=1,st.value+=1},{deep:!0}),qe(()=>x.dataset,a=>{Te()},{deep:!0});const C=g({dataLabels:{show:e.value.style.chart.bars.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}),{isPrinting:Le,isImaging:$e,generatePdf:Me,generateImage:Se}=Ot({elementId:`stackbar_${ne.value}`,fileName:e.value.style.chart.title.text||"vue-ui-stackbar"}),ee=g({width:e.value.style.chart.width,height:e.value.style.chart.height,paddingRatio:{top:e.value.style.chart.padding.top/e.value.style.chart.height,right:e.value.style.chart.padding.right/e.value.style.chart.width,bottom:e.value.style.chart.padding.bottom/e.value.style.chart.height,left:e.value.style.chart.padding.left/e.value.style.chart.width}}),rt=m(()=>$t(e.value.customPalette)),_e=g(null),Ne=g(null);Je(()=>{de()});function de(){if(kt(x.dataset)?Ge({componentName:"VueUiStackbar",type:"dataset"}):x.dataset.forEach((a,o)=>{wt({datasetObject:a,requiredAttributes:["name","series"]}).forEach(t=>{j.value=!1,Ge({componentName:"VueUiStackbar",type:"datasetSerieAttribute",property:t,index:o})})}),setTimeout(()=>{q.value=!0},10),e.value.responsive){const a=Vt(()=>{q.value=!1;const{width:o,height:t}=At({chart:D.value,title:e.value.style.chart.title.text?me.value:null,legend:e.value.style.chart.legend.show?xe.value:null,slicer:e.value.style.chart.zoom.show&&V.value>1?ke.value:null,source:we.value});ee.value.width=o,ee.value.height=t,clearTimeout(Ne.value),Ne.value=setTimeout(()=>{q.value=!0},10)});_e.value=new ResizeObserver(a),_e.value.observe(D.value.parentNode)}}const s=m(()=>{const{height:a,width:o}=ee.value,{right:t}=ee.value.paddingRatio,l=e.value.style.chart.padding.top,i=o-o*t,n=a-e.value.style.chart.padding.bottom,w=e.value.style.chart.padding.left,A=o-w-o*t,O=a-l-e.value.style.chart.padding.bottom;return{chartHeight:a,chartWidth:o,top:l,right:i,bottom:n,left:w,width:A,height:O<0?0:O}}),R=m(()=>x.dataset.map((a,o)=>{const t=Lt(a.color)||rt.value[o]||re[o]||re[o%re.length];return{...a,series:JSON.parse(JSON.stringify(a.series)).map(l=>e.value.style.chart.bars.distributed?Math.abs(l):l),signedSeries:a.series.map(l=>l>=0?1:-1),absoluteIndex:o,id:De(),color:t}})),V=m(()=>Math.max(...R.value.filter(a=>!$.value.includes(a.id)).map(a=>a.series.length))),v=g({start:0,end:Math.max(...x.dataset.map(a=>a.series.length))});function Te(){v.value={start:0,end:Math.max(...x.dataset.map(a=>a.series.length))},ze.value+=1}const h=m(()=>{let a;return e.value.orientation==="vertical"?a=s.value.width/(v.value.end-v.value.start):a=s.value.height/(v.value.end-v.value.start),a<=0?0:a}),X=m(()=>ie(R.value.filter(a=>!$.value.includes(a.id))).slice(v.value.start,v.value.end)),it=m(()=>ie(R.value.filter(a=>!$.value.includes(a.id)).map(a=>({...a,series:a.series.map((o,t)=>a.signedSeries[t]===-1&&o>=0?-o:o)}))).slice(v.value.start,v.value.end)),te=m(()=>{const a=R.value.filter(o=>!$.value.includes(o.id));return{positive:ie(a.map(o=>({...o,series:o.series.slice(v.value.start,v.value.end).map(t=>t>=0?t:0)}))),negative:ie(a.map(o=>({...o,series:o.series.slice(v.value.start,v.value.end).map(t=>t<0?t:0)})))}}),T=m(()=>{const a=e.value.style.chart.grid.scale.scaleMax!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMax:Math.max(...te.value.positive),o=Math.min(...te.value.negative),t=e.value.style.chart.grid.scale.scaleMin!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMin:[-1/0,1/0,NaN,void 0,null].includes(o)?0:o,l=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?Xe(t>0?0:t,a<0?0:a,e.value.style.chart.grid.scale.ticks):Ye(t>0?0:t,a<0?0:a,e.value.style.chart.grid.scale.ticks);return l.ticks.map(i=>({zero:s.value.bottom-s.value.height*(Math.abs(l.min)/(l.max+Math.abs(l.min))),y:s.value.bottom-s.value.height*((i+Math.abs(l.min))/(l.max+Math.abs(l.min))),x:s.value.left-8,horizontal_zero:s.value.left+s.value.width*(Math.abs(l.min)/(l.max+Math.abs(l.min))),horizontal_x:s.value.left+s.value.width*((i+Math.abs(l.min))/(l.max+Math.abs(l.min))),horizontal_y:s.value.bottom-8,value:i}))}),Y=m(()=>e.value.style.chart.grid.x.timeLabels.values.slice(v.value.start,v.value.end)),p=m(()=>{if(!j.value)return[];let a=Array(V.value).fill(0),o=Array(V.value).fill(0),t=Array(V.value).fill(0),l=Array(V.value).fill(0);const i=Math.max(...te.value.positive)||0,n=Math.min(...te.value.negative),w=[-1/0,1/0,NaN,void 0,null].includes(n)?0:n,A=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?Xe(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:w>0?0:w,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:i<0?0:i,e.value.style.chart.grid.scale.ticks):Ye(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:w>0?0:w,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:i<0?0:i,e.value.style.chart.grid.scale.ticks),{min:O,max:K}=A,P=K+(O>=0?0:Math.abs(O))||1,S=s.value.height,se=s.value.width,We=T.value[0]?T.value[0].zero:s.value.bottom,je=T.value[0]?T.value[0].horizontal_zero:s.value.left;return R.value.filter(Z=>!$.value.includes(Z.id)).map(Z=>{const I=Z.series.slice(v.value.start,v.value.end),dt=Z.signedSeries.slice(v.value.start,v.value.end),ht=I.map((y,b)=>s.value.left+h.value*b+h.value*e.value.style.chart.bars.gapRatio/4),yt=I.map((y,b)=>s.value.top+h.value*b+h.value*e.value.style.chart.bars.gapRatio/4),gt=I.map((y,b)=>{const _=e.value.style.chart.bars.distributed?(y||0)/X.value[b]:(y||0)/P;let F,N;return y>0?(N=S*_,F=We-N-a[b],a[b]+=N):(N=S*_,F=We+t[b],t[b]+=Math.abs(N)),F}),bt=I.map((y,b)=>{const _=e.value.style.chart.bars.distributed?(y||0)/X.value[b]:(y||0)/P;let F,N;return y>0?(N=se*_,F=je+o[b],o[b]+=N):(N=se*_,F=je-Math.abs(N)-l[b],l[b]+=Math.abs(N)),F}),ft=I.map((y,b)=>{const _=e.value.style.chart.bars.distributed?(y||0)/X.value[b]:(y||0)/P;return y>0?S*_:S*Math.abs(_)}),pt=I.map((y,b)=>{const _=e.value.style.chart.bars.distributed?(y||0)/X.value[b]:(y||0)/P;return y>0?se*_:se*Math.abs(_)}),mt=I.map(y=>Math.abs(y)).reduce((y,b)=>y+b,0);return{...Z,proportions:I.map((y,b)=>e.value.style.chart.bars.distributed?(y||0)/X.value[b]:(y||0)/mt),series:I,signedSeries:dt,x:ht,y:gt,height:ft,horizontal_width:pt,horizontal_y:yt,horizontal_x:bt}})}),Ie=m(()=>it.value.map((a,o)=>({value:a,sign:a>=0?1:-1})));function ae(a,o,t,l,i){const n=i===-1&&a>=0?-a:a;return Ze(e.value.style.chart.bars.dataLabels.formatter,n,W({p:e.value.style.chart.bars.dataLabels.prefix,v:n,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:o,seriesIndex:t,datapointIndex:l})}function Re(a,o,t,l){return Ze(e.value.style.chart.bars.dataLabels.formatter,a,W({v:a,s:"%",r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:o,seriesIndex:t,datapointIndex:l})}function Ve(a){const o=JSON.parse(JSON.stringify(p.value)).map(t=>({name:t.name,value:t.series[a]===0?0:t.series[a]||null,proportion:t.proportions[a]||null,color:t.color,id:t.id}));be("selectDatapoint",{datapoint:o,period:Y.value[a]})}function Ae(a){U.value=a,Q.value=!0;const o=e.value.style.chart.tooltip.customFormat,t=JSON.parse(JSON.stringify(p.value)).map(i=>({name:i.name,value:i.series[a]===0?0:(i.signedSeries[a]===-1&&i.series[a]>=0?-i.series[a]:i.series[a])||null,proportion:i.proportions[a]||null,color:i.color,id:i.id})),l=t.map(i=>Math.abs(i.value)).reduce((i,n)=>i+n,0);if(Qe(o)&&It(()=>o({seriesIndex:a,datapoint:t,series:p.value,config:e.value})))ve.value=o({seriesIndex:a,datapoint:t,series:p.value,config:e.value});else{const{showValue:i,showPercentage:n,borderColor:w,roundingValue:A,roundingPercentage:O}=e.value.style.chart.tooltip;let K="";Y.value[a]&&(K+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${w};padding-bottom:6px;margin-bottom:3px;">${Y.value[a]}</div>`);const P=[i&&n?"(":"",i&&n?")":""];t.reverse().forEach(S=>{K+=`
                <div style="display:flex;flex-direction:row;align-items:center;gap:4px">
                    <svg viewBox="0 0 12 12" height="14" width="14"><rect rx="1" x="0" y="0" height="12" width="12" stroke="none" fill="${e.value.style.chart.bars.gradient.show?`url(#gradient_${S.id})`:S.color}"/></svg>
                    ${S.name}${i||n?":":""} ${i?W({p:e.value.style.chart.bars.dataLabels.prefix,v:S.value,s:e.value.style.chart.bars.dataLabels.suffix,r:A}):""} ${P[0]}${n?W({v:isNaN(S.value/l)?0:Math.abs(S.value)/l*100,s:"%",r:O}):""}${P[1]}
                </div>
            `}),ve.value=`<div>${K}</div>`}}function ut(a){ce.value=a,pe.value+=1}function Oe(){C.value.showTable=!C.value.showTable}function Pe(){C.value.dataLabels.show=!C.value.dataLabels.show}function Fe(){C.value.showTooltip=!C.value.showTooltip}function nt(){return p.value}const He=m(()=>{if(p.value.length===0)return{head:[],body:[],config:{},columnNames:[]};const a=p.value.map(({name:t,color:l})=>({label:t,color:l})),o=[];for(let t=v.value.start;t<v.value.end;t+=1){const l=[e.value.style.chart.grid.x.timeLabels.values[t]||t+1];R.value.forEach(i=>{l.push(Number((i.series[t]||0).toFixed(e.value.table.td.roundingValue)))}),o.push(l)}return{head:a,body:o}});function Be(){const a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],o=["",...He.value.head.map(n=>n.label)],t=He.value.body,l=a.concat([o]).concat(t),i=Mt(l);St({csvContent:i,title:e.value.style.chart.title.text||"vue-ui-stackbar"})}const le=m(()=>{const a=[""].concat(p.value.map(i=>i.name)).concat(' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>');let o=[];for(let i=0;i<V.value;i+=1){const n=p.value.map(w=>w.series[i]??0).reduce((w,A)=>w+A,0);o.push([e.value.style.chart.grid.x.timeLabels.values.slice(v.value.start,v.value.end)[i]??i+1].concat(p.value.map(w=>(w.series[i]??0).toFixed(e.value.table.td.roundingValue))).concat((n??0).toFixed(e.value.table.td.roundingValue)))}const t={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},l=[e.value.table.columnNames.period].concat(p.value.map(i=>i.name)).concat(e.value.table.columnNames.total);return{head:a,body:o.slice(0,v.value.end-v.value.start),config:t,colNames:l}});function vt(a,o){if(be("selectLegend",p.value.find(t=>t.absoluteIndex===a)),$.value.includes(o.id))$.value=$.value.filter(t=>t!==o.id);else{if($.value.length===R.value.length-1)return;$.value.push(o.id)}}const Ee=m(()=>R.value.map((a,o)=>({...a,shape:"square"})).map(a=>({...a,opacity:$.value.includes(a.id)?.5:1,segregate:()=>vt(a.absoluteIndex,a),isSegregated:$.value.includes(a.id)}))),ct=m(()=>({cy:"stackbar-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),oe=g(!1);function he(){oe.value=!oe.value}return tt({getData:nt,generatePdf:Me,generateCsv:Be,generateImage:Se,toggleTable:Oe,toggleLabels:Pe,toggleTooltip:Fe,toggleAnnotator:he}),(a,o)=>(r(),u("div",{id:`stackbar_${ne.value}`,ref_key:"stackbarChart",ref:D,class:ye({"vue-ui-stackbar":!0,"vue-data-ui-wrapper-fullscreen":ce.value}),style:G(`background:${e.value.style.chart.backgroundColor};color:${e.value.style.chart.color};font-family:${e.value.style.fontFamily}; position: relative; ${e.value.responsive?"height: 100%":""}`)},[e.value.userOptions.buttons.annotator?(r(),J(Gt,{key:0,parent:D.value,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:oe.value,onClose:he},null,8,["parent","backgroundColor","color","active"])):c("",!0),k(a.$slots,"userConfig",{},void 0,!0),e.value.style.chart.title.text?(r(),u("div",{key:1,ref_key:"chartTitle",ref:me,style:"width:100%;background:transparent;padding-bottom:24px"},[ue(Bt,{config:{title:{cy:"stackbar-title",...e.value.style.chart.title},subtitle:{cy:"stackbar-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"])],512)):c("",!0),e.value.userOptions.show&&j.value?(r(),J(Pt,{ref:"details",key:`user_option_${pe.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:L(Le),isImaging:L($e),uid:ne.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:ce.value,chartElement:D.value,position:e.value.userOptions.position,isTooltip:C.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:oe.value,onToggleFullscreen:ut,onGeneratePdf:L(Me),onGenerateCsv:Be,onGenerateImage:L(Se),onToggleTable:Oe,onToggleLabels:Pe,onToggleTooltip:Fe,onToggleAnnotator:he},_t({_:2},[a.$slots.optionTooltip?{name:"optionTooltip",fn:z(()=>[k(a.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:z(()=>[k(a.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:z(()=>[k(a.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:z(()=>[k(a.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:z(()=>[k(a.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:z(()=>[k(a.$slots,"optionLabels",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:z(({toggleFullscreen:t,isFullscreen:l})=>[k(a.$slots,"optionFullscreen",H(B({toggleFullscreen:t,isFullscreen:l})),void 0,!0)]),key:"6"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:z(({toggleAnnotator:t,isAnnotator:l})=>[k(a.$slots,"optionAnnotator",H(B({toggleAnnotator:t,isAnnotator:l})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasXls","hasTable","hasLabel","hasFullscreen","isFullscreen","chartElement","position","isTooltip","titles","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):c("",!0),j.value?(r(),u("svg",{key:3,xmlns:L(Nt),viewBox:`0 0 ${s.value.chartWidth<=0?10:s.value.chartWidth} ${s.value.chartHeight<=0?10:s.value.chartHeight}`,style:G(`max-width:100%;overflow:visible;background:transparent;color:${e.value.style.chart.color}`)},[ue(Jt),e.value.style.chart.bars.gradient.show?(r(),u("defs",Yt,[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("linearGradient",{id:`gradient_${t.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[E("stop",{offset:"0%","stop-color":t.color},null,8,Zt),E("stop",{offset:"61.8%","stop-color":L(Tt)(t.color,e.value.style.chart.bars.gradient.intensity/100)},null,8,Qt),E("stop",{offset:"100%","stop-color":t.color},null,8,ea)],8,Kt))),256))])):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="vertical"?(r(!0),u(d,{key:1},f(T.value,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.right,y1:t.y,y2:t.y,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,ta))),256)):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:2},f(v.value.end-v.value.start+1,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.right,y1:s.value.top+h.value*l,y2:s.value.top+h.value*l,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,aa))),256)):c("",!0),e.value.style.chart.grid.y.showVerticalLines&&e.value.orientation==="vertical"?(r(!0),u(d,{key:3},f(v.value.end-v.value.start+1,(t,l)=>(r(),u("line",{x1:s.value.left+h.value*l,x2:s.value.left+h.value*l,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,la))),256)):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:4},f(T.value,(t,l)=>(r(),u("line",{x1:t.horizontal_x,x2:t.horizontal_x,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,oa))),256)):c("",!0),(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[e.value.orientation==="vertical"?(r(!0),u(d,{key:0},f(t.x,(i,n)=>(r(),u("rect",{x:i,y:t.y[n]<0?0:t.y[n],height:t.height[n]<0?1e-4:t.height[n],rx:e.value.style.chart.bars.borderRadius>t.height[n]/2?(t.height[n]<0?0:t.height[n])/2:e.value.style.chart.bars.borderRadius,width:h.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?`url(#gradient_${t.id})`:t.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":q.value})},null,10,sa))),256)):(r(!0),u(d,{key:1},f(t.horizontal_x,(i,n)=>(r(),u("rect",{x:i,y:t.horizontal_y[n]<0?0:t.horizontal_y[n],width:t.horizontal_width[n]<0?1e-4:t.horizontal_width[n],rx:e.value.style.chart.bars.borderRadius>t.height[n]/2?(t.height[n]<0?0:t.height[n])/2:e.value.style.chart.bars.borderRadius,height:h.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?`url(#gradient_${t.id})`:t.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":q.value})},null,10,ra))),256))]))),256)),e.value.style.chart.grid.x.showAxis?(r(),u("line",{key:5,x1:s.value.left,x2:s.value.right,y1:s.value.bottom,y2:s.value.bottom,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":e.value.style.chart.grid.x.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,ia)):c("",!0),e.value.style.chart.grid.y.showAxis&&!e.value.style.chart.bars.distributed?(r(),u("line",{key:6,x1:s.value.left,x2:s.value.left,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":e.value.style.chart.grid.y.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,ua)):c("",!0),e.value.style.chart.grid.x.axisName.show&&e.value.style.chart.grid.x.axisName.text?(r(),u("text",{key:7,x:s.value.left+s.value.width/2,y:s.value.chartHeight+e.value.style.chart.grid.x.axisName.offsetY,"font-size":e.value.style.chart.grid.x.axisName.fontSize,fill:e.value.style.chart.grid.x.axisName.color,"font-weight":e.value.style.chart.grid.x.axisName.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.grid.x.axisName.text),9,na)):c("",!0),e.value.style.chart.grid.y.axisName.show&&e.value.style.chart.grid.y.axisName.text?(r(),u("text",{key:8,transform:`translate(${e.value.style.chart.grid.y.axisName.fontSize+e.value.style.chart.grid.y.axisName.offsetX}, ${s.value.top+s.value.height/2}) rotate(-90)`,"font-size":e.value.style.chart.grid.y.axisName.fontSize,fill:e.value.style.chart.grid.y.axisName.color,"font-weight":e.value.style.chart.grid.y.axisName.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.grid.y.axisName.text),9,va)):c("",!0),C.value.dataLabels.show&&e.value.orientation==="vertical"?(r(),u(d,{key:9},[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[(r(!0),u(d,null,f(t.x,(i,n)=>(r(),u("text",{x:i+h.value*(1-e.value.style.chart.bars.gapRatio/2)/2,y:t.y[n]+t.height[n]/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?L(Ke)(t.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?Re(t.proportions[n]*100,t,l,n):ae(t.series[n],t,l,n,t.signedSeries[n])),9,ca))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&p.value.length>1?(r(),u("g",da,[(r(!0),u(d,null,f(Ie.value,(t,l)=>(r(),u("text",{x:s.value.left+h.value*l+h.value/2,y:s.value.top-e.value.style.chart.bars.totalValues.fontSize/3,"text-anchor":"middle","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},M(ae(t.value,t,l,t.sign)),9,ha))),256))])):c("",!0)],64)):c("",!0),C.value.dataLabels.show&&e.value.orientation==="horizontal"?(r(),u(d,{key:10},[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[(r(!0),u(d,null,f(t.horizontal_x,(i,n)=>(r(),u("text",{x:i+(t.horizontal_width[n]<0?1e-4:t.horizontal_width[n])/2,y:t.horizontal_y[n]+h.value*(1-e.value.style.chart.bars.gapRatio/2)/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?L(Ke)(t.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?Re(t.proportions[n]*100,t,l,n):ae(t.series[n],t,l,n,t.signedSeries[n])),9,ya))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&p.value.length>1?(r(),u("g",ga,[(r(!0),u(d,null,f(Ie.value,(t,l)=>(r(),u("text",{x:s.value.right+e.value.style.chart.bars.totalValues.fontSize/3,y:s.value.top+h.value*l+h.value/2,"text-anchor":"start","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},M(ae(t.value,t,l,t.sign)),9,ba))),256))])):c("",!0)],64)):c("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="vertical"?(r(),u(d,{key:11},[(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.left-6,y1:t.y,y2:t.y,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1},null,8,fa))),256)),(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("text",{x:t.x,y:t.y+e.value.style.chart.grid.y.axisLabels.fontSize/3,"font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":"end"},M(L(W)({p:e.value.style.chart.bars.dataLabels.prefix,v:t.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding})),9,pa))),256))],64)):c("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="horizontal"?(r(),u(d,{key:12},[(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("line",{x1:t.horizontal_x,x2:t.horizontal_x,y1:s.value.bottom,y2:s.value.bottom+6,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,ma))),256)),(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("text",{"font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle",transform:`translate(${t.horizontal_x}, ${s.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${e.value.style.chart.grid.x.timeLabels.rotation})`},M(L(W)({p:e.value.style.chart.bars.dataLabels.prefix,v:t.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding})),9,xa))),256))],64)):c("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="vertical"?(r(!0),u(d,{key:13},f(Y.value,(t,l)=>(r(),u("text",{"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.x.timeLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.x.timeLabels.color,transform:`translate(${s.value.left+h.value*l+h.value/2}, ${s.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${e.value.style.chart.grid.x.timeLabels.rotation})`},M(t),9,ka))),256)):c("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:14},f(Y.value,(t,l)=>(r(),u("text",{"text-anchor":"end","font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,x:s.value.left-8,y:s.value.top+h.value*l+h.value/2+e.value.style.chart.grid.y.axisLabels.fontSize/3},M(t),9,wa))),256)):c("",!0),C.value.showTooltip&&e.value.orientation==="vertical"?(r(!0),u(d,{key:15},f(v.value.end-v.value.start,(t,l)=>(r(),u("rect",{x:s.value.left+l*h.value,y:s.value.top,width:h.value,height:s.value.height<0?0:s.value.height,onClick:i=>Ve(l),onMouseenter:i=>Ae(l),onMouseleave:o[0]||(o[0]=i=>{U.value=null,Q.value=!1}),fill:l===U.value?e.value.style.chart.highlighter.color:"transparent",style:G({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,za))),256)):c("",!0),C.value.showTooltip&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:16},f(v.value.end-v.value.start,(t,l)=>(r(),u("rect",{x:s.value.left,y:s.value.top+l*h.value,width:s.value.width<0?0:s.value.width,height:h.value,onClick:i=>Ve(l),onMouseenter:i=>Ae(l),onMouseleave:o[1]||(o[1]=i=>{U.value=null,Q.value=!1}),fill:l===U.value?e.value.style.chart.highlighter.color:"transparent",style:G({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,Ca))),256)):c("",!0),k(a.$slots,"svg",H(B({...s.value})),void 0,!0)],12,Xt)):c("",!0),a.$slots.watermark?(r(),u("div",La,[k(a.$slots,"watermark",H(B({isPrinting:L(Le)||L($e)})),void 0,!0)])):c("",!0),j.value?c("",!0):(r(),J(Dt,{key:5,config:{type:"bar",style:{backgroundColor:e.value.style.chart.backgroundColor,bar:{axis:{color:"#CCCCCC"},color:"#CCCCCC"}}}},null,8,["config"])),E("div",{ref_key:"chartSlicer",ref:ke,style:G(`width:100%;background:${e.value.style.chart.backgroundColor}`),"data-html2canvas-ignore":""},[e.value.style.chart.zoom.show&&V.value>1?(r(),J(Ft,{key:`slicer_${ze.value}`,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,fontSize:e.value.style.chart.zoom.fontSize,useResetSlot:e.value.style.chart.zoom.useResetSlot,labelLeft:e.value.style.chart.grid.x.timeLabels.values[v.value.start]?e.value.style.chart.grid.x.timeLabels.values[v.value.start]:"",labelRight:e.value.style.chart.grid.x.timeLabels.values[v.value.end-1]?e.value.style.chart.grid.x.timeLabels.values[v.value.end-1]:"",textColor:e.value.style.chart.color,inputColor:e.value.style.chart.zoom.color,selectColor:e.value.style.chart.zoom.highlightColor,max:Math.max(...ge.dataset.map(t=>t.series.length)),min:0,valueStart:v.value.start,valueEnd:v.value.end,start:v.value.start,"onUpdate:start":o[2]||(o[2]=t=>v.value.start=t),end:v.value.end,"onUpdate:end":o[3]||(o[3]=t=>v.value.end=t),onReset:Te},{"reset-action":z(({reset:t})=>[k(a.$slots,"reset-action",H(B({reset:t})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"])):c("",!0)],4),ue(Ht,{show:C.value.showTooltip&&Q.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:D.value,content:ve.value,isCustom:L(Qe)(e.value.style.chart.tooltip.customFormat)},{"tooltip-before":z(()=>[k(a.$slots,"tooltip-before",H(B({...fe.value})),void 0,!0)]),"tooltip-after":z(()=>[k(a.$slots,"tooltip-after",H(B({...fe.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isCustom"]),E("div",{ref_key:"chartLegend",ref:xe},[e.value.style.chart.legend.show&&j.value?(r(),J(Et,{key:0,legendSet:Ee.value,config:ct.value,onClickMarker:o[4]||(o[4]=({legend:t})=>t.segregate())},{item:z(({legend:t})=>[E("div",{onClick:l=>t.segregate(),style:G(`opacity:${$.value.includes(t.id)?.5:1}`)},M(t.name),13,$a)]),_:1},8,["legendSet","config"])):k(a.$slots,"legend",{key:1,legend:Ee.value},void 0,!0)],512),a.$slots.source?(r(),u("div",{key:6,ref_key:"source",ref:we,dir:"auto"},[k(a.$slots,"source",{},void 0,!0)],512)):c("",!0),v.value.end-v.value.start<200?(r(),J(Wt,{key:7,hideDetails:"",config:{open:C.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:z(()=>[ue(jt,{colNames:le.value.colNames,head:le.value.head,body:le.value.body,config:le.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:o[5]||(o[5]=t=>C.value.showTable=!1)},{th:z(({th:t})=>[E("div",{innerHTML:t},null,8,Ma)]),td:z(({td:t})=>[Rt(M(isNaN(Number(t))?t:L(W)({p:e.value.style.chart.bars.dataLabels.prefix,v:t,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.table.td.roundingValue})),1)]),_:1},8,["colNames","head","body","config","title"])]),_:1},8,["config"])):c("",!0)],14,qt))}},Da=Ut(Sa,[["__scopeId","data-v-d80dd138"]]);export{Da as default};
