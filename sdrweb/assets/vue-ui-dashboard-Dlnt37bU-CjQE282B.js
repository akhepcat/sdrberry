import{af as J,c as y,z as K,r as s,w as Q,o as m,a as w,e as g,a4 as Z,M as X,L as W,S as ee,T as te,P as B,k as oe,n as ae,m as le}from"./index-CMbgrvzv.js";import ue from"./pdf-B7oVat64-DfpE5bV4.js";import{c as ne}from"./useNestedProp-BxrcwmTZ-DfxG55sS.js";import{s as ie}from"./vue-data-ui-DF7u-eZV-DHaDTFza.js";import"./html2canvas.esm-d2sM-0Wm-tnAx6l3B.js";import"./jspdf.es.min-C660YX78-Si0iEiXx.js";const de=x=>(ee("data-v-57895b3a"),x=x(),te(),x),se={key:0,"data-html2canvas-ignore":"",style:{width:"100%",display:"flex","justify-content":"end"}},ve=["disabled"],he=["stroke"],ce=Z('<path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-57895b3a></path><path d="M18 16v.01" data-v-57895b3a></path><path d="M6 16v.01" data-v-57895b3a></path><path d="M12 5v.01" data-v-57895b3a></path><path d="M12 12v.01" data-v-57895b3a></path><path d="M12 1a4 4 0 0 1 2.001 7.464l.001 .072a3.998 3.998 0 0 1 1.987 3.758l.22 .128a3.978 3.978 0 0 1 1.591 -.417l.2 -.005a4 4 0 1 1 -3.994 3.77l-.28 -.16c-.522 .25 -1.108 .39 -1.726 .39c-.619 0 -1.205 -.14 -1.728 -.391l-.279 .16l.007 .231a4 4 0 1 1 -2.212 -3.579l.222 -.129a3.998 3.998 0 0 1 1.988 -3.756l.002 -.071a4 4 0 0 1 -1.995 -3.265l-.005 -.2a4 4 0 0 1 4 -4z" data-v-57895b3a></path>',6),re=[ce],fe={key:1},pe=["id"],ge=de(()=>g("div",{class:"vue-ui-dashboard-grid"},null,-1)),be=["onMousedown","onTouchstart"],me=["onMousedown","onTouchstart"],we=["onMousedown","onTouchstart"],ye=["onMousedown","onTouchstart"],xe=["onMousedown","onTouchstart"],Y=20,ke={__name:"vue-ui-dashboard",props:{dataset:Array,config:Object},emits:["change"],setup(x,{expose:I,emit:P}){const z=x;J(e=>({"417957d3":A.value,"60fae9e7":O.value}));const{vue_ui_dashboard:E}=K(),i=y(()=>ne({userConfig:z.config,defaultConfig:E})),H=s(`vue-ui-dashboard-${Math.random()}`),h=s(i.value.locked);function N(){h.value=!h.value}const n=s(z.dataset),c=s(null),u=s(null),r=s({x:0,y:0}),f=s({x:0,y:0}),d=s(null),v=s(!1),p=s(null),M=s(!1);function _(){M.value=!0,ue({domElement:document.getElementById(`vue-ui-dashboard_${H.value}`),fileName:"vue-ui-dashboard"}).finally(()=>{M.value=!1})}function V(e){if(!h.value&&(v.value=!0,p.value=e,u.value===null)){c.value=e,r.value={x:event.clientX,y:event.clientY};const t=n.value[e],a=100-t.width,o=100-t.height;t.left<0&&(t.left=0),t.top<0&&(t.top=0),t.left>a&&(t.left=a),t.top>o&&(t.top=o),t.left<0&&(t.left=0),t.top<0&&(t.top=0),t.left+t.width>100&&(t.left=100-t.width),t.top+t.height>100&&(t.top=100-t.height)}}function T(e,t){v.value=!0,p.value=e,u.value={index:e,direction:t};const a=n.value[e];f.value={x:event.clientX,y:event.clientY,initialWidth:a.width,initialHeight:a.height}}function S(e,t,a){if(u.value.direction.includes("top")){const o=e.height-a/d.value.offsetHeight*100;o>=Y&&(e.top+=a/d.value.offsetHeight*100,e.height=o)}if(u.value.direction.includes("bottom")){const o=e.height+a/d.value.offsetHeight*100;o>=Y&&(e.height=o)}if(u.value.direction.includes("left")){const o=e.width-t/d.value.offsetWidth*100;o>=Y&&(e.left+=t/d.value.offsetWidth*100,e.width=o)}if(u.value.direction.includes("right")){const o=e.width+t/d.value.offsetWidth*100;o>=Y&&(e.width=o)}}function j(e){if(!h.value){if(v.value=!0,c.value!==null){const t=n.value[c.value],a=e.clientX-r.value.x,o=e.clientY-r.value.y,l=t.left+a/d.value.offsetWidth*100,b=t.top+o/d.value.offsetHeight*100;l>=0&&b>=0&&l+t.width<=100&&b+t.height<=100&&(t.left=l,t.top=b),r.value={x:e.clientX,y:e.clientY}}if(u.value!==null){const t=n.value[u.value.index],a=e.clientX-f.value.x,o=e.clientY-f.value.y;S(t,a,o),f.value={x:e.clientX,y:e.clientY}}}}Q(n,e=>{e&&!v.value&&P("change",n.value)},{deep:!0});function L(){c.value=null,u.value=null,v.value=!1,p.value=null,n.value.forEach(e=>{e.left=Math.round(e.left/100*100),e.top=Math.round(e.top/100*100),e.width=Math.round(e.width/100*100),e.height=Math.round(e.height/100*100)})}function D(e){h.value||(v.value=!0,p.value=e,u.value===null&&(c.value=e,r.value={x:event.touches[0].clientX,y:event.touches[0].clientY}))}function $(e,t,a){if(v.value=!0,p.value=e,u.value===null){u.value={index:e,direction:t};const o=n.value[e];f.value={x:a.touches[0].clientX,y:a.touches[0].clientY,initialWidth:o.width,initialHeight:o.height}}}function C(e){if(v.value=!0,e.preventDefault(),u.value!==null){const t=n.value[u.value.index],a=e.touches[0].clientX-f.value.x,o=e.touches[0].clientY-f.value.y;S(t,a,o),f.value={x:e.touches[0].clientX,y:e.touches[0].clientY}}}function F(e){if(!h.value&&(v.value=!0,e.preventDefault(),c.value!==null)){const t=n.value[c.value],a=e.touches[0].clientX-r.value.x,o=e.touches[0].clientY-r.value.y,l=t.left+a/d.value.offsetWidth*100,b=t.top+o/d.value.offsetHeight*100;l>=0&&b>=0&&l+t.width<=100&&b+t.height<=100&&(t.left=l,t.top=b),r.value={x:e.touches[0].clientX,y:e.touches[0].clientY}}}function k(){v.value=!1,p.value=null,c.value=null,u.value=null,n.value.forEach(e=>{e.left=Math.round(e.left/100*100),e.top=Math.round(e.top/100*100),e.width=Math.round(e.width/100*100),e.height=Math.round(e.height/100*100)})}const A=y(()=>i.value.style.item.borderColor),O=y(()=>i.value.style.resizeHandles.backgroundColor),R=y(()=>i.value.style.board.aspectRatio),q=y(()=>i.value.style.board.backgroundColor),G=y(()=>i.value.style.board.border);function U(){return n.value}return I({generatePdf:_,getItemsPositions:U,toggleLock:N}),(e,t)=>(m(),w("div",null,[i.value.allowPrint?(m(),w("div",se,[g("button",{class:"vue-ui-dashboard-button",onClick:_,disabled:M.value,style:X([{"margin-top":"12px"},`color:${i.value.style.board.color}`])},[M.value?(m(),w("svg",{key:0,class:"vue-ui-dashboard-print-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:i.value.style.board.color,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},re,8,he)):(m(),w("span",fe,"PDF"))],12,ve)])):W("",!0),g("div",{class:"vue-ui-dashboard-container",ref_key:"dashboardContainer",ref:d,id:`vue-ui-dashboard_${H.value}`,style:X(`border:${G.value}; sbackground:${q.value}; aspect-ratio:${R.value}`)},[g("div",{class:"vue-ui-dashboard-grid-container",ref:"container",onMousemove:j,onMouseup:L,onTouchmove:F,onTouchend:k,style:X(`background:${i.value.style.board.backgroundColor}`)},[ge,(m(!0),w(B,null,oe(n.value,(a,o)=>(m(),w("div",{key:a.id,class:ae({"vue-ui-dashboard-grid-item":!0,"vue-ui-dashboard-grid-item--locked":h.value}),style:X({width:`${a.width}%`,height:`${a.height}%`,left:`${a.left}%`,top:`${a.top}%`,cursor:"move",boxShadow:p.value===o?"0 6px 12px -3px rgba(0,0,0,0.3)":"",zIndex:p.value===o?"1":"0",backgroundColor:i.value.style.item.backgroundColor}),onMousedown:l=>V(o),onTouchstart:l=>D(o)},[h.value?W("",!0):(m(),w(B,{key:0},[g("div",{class:"vue-ui-dashboard-resize-handle vue-ui-dashboard-top-left",onMousedown:l=>T(o,"top-left"),onTouchstart:l=>$(o,"top-left",l),onTouchmove:t[0]||(t[0]=l=>C(l)),onTouchend:k},null,40,me),g("div",{class:"vue-ui-dashboard-resize-handle vue-ui-dashboard-top-right",onMousedown:l=>T(o,"top-right"),onTouchstart:l=>$(o,"top-right",l),onTouchmove:t[1]||(t[1]=l=>C(l)),onTouchend:k},null,40,we),g("div",{class:"vue-ui-dashboard-resize-handle vue-ui-dashboard-bottom-left",onMousedown:l=>T(o,"bottom-left"),onTouchstart:l=>$(o,"bottom-left",l),onTouchmove:t[2]||(t[2]=l=>C(l)),onTouchend:k},null,40,ye),g("div",{class:"vue-ui-dashboard-resize-handle vue-ui-dashboard-bottom-right",onMousedown:l=>T(o,"bottom-right"),onTouchstart:l=>$(o,"bottom-right",l),onTouchmove:t[3]||(t[3]=l=>C(l)),onTouchend:k},null,40,xe)],64)),le(e.$slots,"content",{item:a,index:o,left:a.left,top:a.top,height:a.height,width:a.width},void 0,!0)],46,be))),128))],36)],12,pe)]))}},ze=ie(ke,[["__scopeId","data-v-57895b3a"]]);export{ze as default};
