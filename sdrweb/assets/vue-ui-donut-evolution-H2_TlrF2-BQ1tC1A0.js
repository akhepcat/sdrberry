import{z as Ze,c as p,r as x,b as el,B as ll,C as Y,Z as tl,D as Te,R as al,A as K,H as ol,w as He,Q as re,E as ul,ak as sl,ad as Oe,F as ie,K as nl,V as rl,N as il,o as a,a as o,i as O,L as c,j as vl,l as _,m as P,p as q,q as J,u as v,M as ve,n as T,J as cl,f as dl,e as d,O as U,P as m,k,h as b,ae as yl,U as ce,G as Q,X as Ee,al as We,Y as Ie,$ as Z,ah as hl,g as Ve}from"./index-UNQvOp-_.js";import{x as gl}from"./Title-DyD-mBPN-D1JKsC4v.js";import{r as fl,a as bl}from"./usePrinter-CLcxWv-4-BCaxEi1-.js";import{W as pl}from"./DataTable-D8fcY_sJ-DwUEw2sq.js";import{C as xl}from"./Legend-BorSDXCj-BlB-FUJn.js";import ml from"./vue-ui-skeleton-Dgzcn3FL-BesRK3Fh.js";import{U as kl}from"./Slicer-BLQZ4Fne-CFW9kebM.js";import Cl from"./vue-ui-accordion-m8rut1bP-B24xq09o.js";import{c as Re}from"./useNestedProp-BxrcwmTZ-CudEJDco.js";import{p as wl}from"./PackageVersion-mSsg8dpu-BpMA5JNq.js";import{S as $l}from"./PenAndPaper-Dk41ZrJ0-C6X1XG5F.js";import{s as Ll}from"./vue-data-ui-DF7u-eZV-Cm3hFNaA.js";import"./Shape-DYFnvMNd-Cz606loY.js";import"./useResponsive-CoxXLe23-CoJWR8uA.js";const Al=["id"],zl=["xmlns","viewBox"],Nl=["id"],Sl=["stop-color"],Fl=["stop-color"],_l=["id"],Pl=["stop-color"],Tl=["stop-color"],Hl=["stop-color"],Ol={key:0},El=["x1","x2","y1","y2","stroke","stroke-width"],Wl=["x1","x2","y1","y2","stroke","stroke-width"],Il={key:0},Vl=["x1","x2","y1","y2","stroke","stroke-width"],Rl=["x1","x2","y1","y2","stroke","stroke-width"],Ml=["x","y","font-size","fill","font-weight"],Bl=["text-anchor","font-size","fill","transform"],Ul=["x1","y1","x2","y2","stroke","stroke-width"],Dl={key:1},Gl=["cx","cy","r","fill"],Xl={key:0},jl={key:0},Yl=["d","stroke"],Kl=["text-anchor","x","y","fill"],ql=["cx","cy","r","fill"],Jl={key:0},Ql=["cx","cy","fill"],Zl={key:1},et=["d","fill","stroke"],lt={key:2},tt=["d","fill","stroke"],at=["x","y","font-size","fill"],ot=["x","y","width","fill","onClick"],ut=["x","y","width","height","onMouseenter","onClick"],st={key:3,"data-cy-zoom":"",class:"vue-ui-donut-evolution-dialog"},nt=["x","y","width","height","fill"],rt=["x1","y1","x2","y2","stroke"],it=["x1","y2","x2","y1","stroke"],vt=["onKeypress","cx","cy","r"],ct=["d","stroke"],dt=["cx","cy","r","fill"],yt=["d","fill","stroke"],ht={class:"vue-ui-donut-evolution-focus"},gt=["text-anchor","x","y","fill"],ft=["cx","cy","r","fill"],bt=["cx","cy","r","fill"],pt=["x","y","fill"],xt=["x","y","font-size","fill"],mt={key:5,class:"vue-data-ui-watermark"},kt=["onClick"],Ct={key:0},wt={key:1},$t={key:9,ref:"source",dir:"auto"},Lt={key:0},At={key:1},zt={__name:"vue-ui-donut-evolution",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend"],setup(Me,{expose:Be,emit:de}){const A=Me,{vue_ui_donut_evolution:Ue}=Ze(),D=p(()=>!!A.dataset&&A.dataset.length),y=x({start:0,end:Math.max(...A.dataset.map(t=>t.values.length))});function ye(){y.value={start:0,end:M.value},fe.value+=1}el(()=>{he()});function he(){ll(A.dataset)?Y({componentName:"VueUiDonutEvolution",type:"dataset"}):A.dataset.length&&A.dataset.forEach((t,i)=>{tl({datasetObject:t,requiredAttributes:["name","values"]}).forEach(l=>{Y({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:l,index:i})})})}const E=x(Te()),C=x([]),f=x(null),ee=x(null),z=x(!1),N=x(null),le=x(null),De=x(null),ge=x(0),fe=x(0),be=x(0),pe=x(0),xe=x(0),e=p({get:()=>me(),set:t=>t});function me(){const t=Re({userConfig:A.config,defaultConfig:Ue});return t.theme?{...Re({userConfig:ol.vue_ui_donut_evolution[t.theme]||A.config,defaultConfig:t}),customPalette:al[t.theme]||K}:t}He(()=>A.config,t=>{e.value=me(),he(),be.value+=1,pe.value+=1,xe.value+=1},{deep:!0}),He(()=>A.dataset,t=>{ye()},{deep:!0});const{isPrinting:ke,isImaging:Ce,generatePdf:we,generateImage:$e}=fl({elementId:E.value,fileName:e.value.style.chart.title.text||"vue-ui-donut-evolution"}),Ge=p(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),Xe=p(()=>ul(e.value.customPalette)),G=x({showTable:e.value.table.show}),s=p(()=>({top:e.value.style.chart.layout.padding.top,right:e.value.style.chart.layout.padding.right,bottom:e.value.style.chart.layout.padding.bottom,left:e.value.style.chart.layout.padding.left})),r=p(()=>{const t=e.value.style.chart.layout.height,i=e.value.style.chart.layout.width,l=t-s.value.top-s.value.bottom,n=i-s.value.left-s.value.right;return{absoluteHeight:t,absoluteWidth:i,centerX:s.value.left+n/2,centerY:s.value.top+l/2,height:l,width:n}}),H=p(()=>(A.dataset.forEach((t,i)=>{[null,void 0].includes(t.name)&&Y({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"name",index:i}),[null,void 0].includes(t.values)&&Y({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"values",index:i})}),A.dataset.map((t,i)=>({...t,values:sl(t.values),color:re(t.color)||Xe.value[i]||K[i]||K[i%K.length],length:(t.values||[]).length,uid:Te()})))),R=p(()=>H.value.filter(t=>!C.value.includes(t.uid)).map(t=>({...t,values:t.values.filter((i,l)=>l>=y.value.start&&l<=y.value.end)}))),M=p(()=>Math.max(...R.value.map(t=>t.length))),$=p(()=>r.value.width/(y.value.end-y.value.start)),w=p(()=>{const t=[];for(let u=0;u<y.value.end-y.value.start;u+=1){const g=R.value.map(F=>F.values[u]??null),h=g.filter(F=>[void 0,null].includes(F)).length===g.length,S=g.reduce((F,L)=>F+L,0),ne=g.map(F=>F/S),V=s.value.left+$.value*u+$.value/2;t.push({index:u,percentages:ne,subtotal:h||S<0?null:S,values:g,x:V})}const i=0,l=Math.max(...t.map(u=>u.subtotal)),n=t.length===1?l*2:l;return t.map((u,g)=>{const h=$.value/2*.7,S=h>r.value.width/16?r.value.width/16:h,ne=f.value===u.index?r.value.width/16:S,V=t.length>4?h*2:h*2>$.value/2*.7?$.value/2*.7:h*2,F=r.value.absoluteHeight-s.value.bottom-r.value.height*u.subtotal/Oe(i,n,e.value.style.chart.layout.grid.yAxis.dataLabels.steps).max;return{...u,y:F,radius:S,activeRadius:ne,hoverRadius:V,donut:ie({series:R.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},u.x,F,S,S,1.99999,2,1,360,105.25,S/2),donutHover:ie({series:R.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},u.x,F,V,V,1.99999,2,1,360,105.25,V/2),donutFocus:ie({series:R.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},r.value.centerX,r.value.centerY,r.value.height/3.6,r.value.height/3.6,1.99999,2,1,360,105.25,r.value.height/6)}})});function X(t,i,l){return ce(e.value.style.chart.layout.dataLabels.formatter,t,Q({p:e.value.style.chart.layout.dataLabels.prefix,v:t,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.dataLabels.rounding}),{datapoint:i,index:l})}const te=p(()=>({max:Math.max(...w.value.map(t=>t.subtotal)),min:0})),W=p(()=>{const t=w.value.length===1?te.value.max*2:te.value.max;return Oe(te.value.min,t,e.value.style.chart.layout.grid.yAxis.dataLabels.steps)});function je(t){return t/W.value.max}const Ye=p(()=>W.value.ticks.map(t=>({y:r.value.absoluteHeight-s.value.bottom-r.value.height*je(t),value:t})));function Le(t,i){return isNaN(t.value/We(i,"value"))?0:(t.value/We(i,"value")*100).toFixed(0)+"%"}function Ae(){z.value||(f.value=null,ee.value=null)}function Ke(t){z.value||(f.value=t.index,ee.value=t)}const ae=x(null);function oe(t,i){t.subtotal&&(ee.value=null,f.value=null,z.value=!0,N.value=t,[null,void 0].includes(i)||(ae.value=i))}function ze(){N.value=null,z.value=!1,ae.value=null}const Ne=p(()=>H.value.map((t,i)=>({name:t.name,value:t.values.slice(y.value.start,y.value.end).reduce((l,n)=>l+n,0),shape:"circle",uid:t.uid,color:t.color})).sort((t,i)=>i.value-t.value).map(t=>({...t,opacity:C.value.includes(t.uid)?.5:1,segregate:()=>ue(t.uid),isSegregated:C.value.includes(t.uid)}))),Se=p(()=>w.value.map(t=>t.subtotal).reduce((t,i)=>t+i,0)),qe=p(()=>({cy:"donut-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""}));function ue(t){if(C.value.includes(t))C.value=C.value.filter(i=>i!==t),de("selectLegend",null);else{if(C.value.length===H.value.length-1)return;C.value.push(t),de("selectLegend",H.value.find(i=>i.uid===t))}N.value&&oe(w.value.find((i,l)=>l===ae.value))}const I=p(()=>{const t=[""].concat(H.value.filter(u=>!C.value.includes(u.uid)).map(u=>({name:u.name,color:u.color}))).concat(["Î£"]);let i=[];for(let u=0;u<M.value;u+=1){const g=H.value.filter(h=>!C.value.includes(h.uid)).map(h=>h.values[u]??0).reduce((h,S)=>h+S,0);i.push([e.value.style.chart.layout.grid.xAxis.dataLabels.values[u]??"-"].concat(H.value.filter(h=>!C.value.includes(h.uid)).map(h=>({value:h.values[u]??0,percentage:h.values[u]?h.values[u]/g*100:0}))).concat([`${e.value.style.chart.layout.dataLabels.prefix}${Number(g.toFixed(e.value.table.td.roundingValue))}${e.value.style.chart.layout.dataLabels.suffix}`]))}const l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},n=[e.value.table.columnNames.period].concat(H.value.filter(u=>!C.value.includes(u.uid)).map(u=>u.name)).concat(e.value.table.columnNames.total);return{head:t,body:i,config:l,colNames:n}});function Je(){return H.value}function Fe(){nl(()=>{const t=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],i=[...I.value.head.map(g=>g.name??g)],l=[...I.value.body.map(g=>g.map(h=>h.value??h))],n=t.concat([i]).concat(l),u=rl(n);il({csvContent:u,title:e.value.style.chart.title.text||"vue-ui-donut-evolution"})})}const B=x(!1);function Qe(t){B.value=t,ge.value+=1}function _e(){G.value.showTable=!G.value.showTable}const j=x(!1);function se(){j.value=!j.value}return Be({getData:Je,generatePdf:we,generateCsv:Fe,generateImage:$e,toggleTable:_e,toggleAnnotator:se}),(t,i)=>(a(),o("div",{ref_key:"donutEvolutionChart",ref:le,class:T(`vue-ui-donut-evolution ${B.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:ve(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;background:${e.value.style.chart.backgroundColor}`),id:E.value},[e.value.userOptions.buttons.annotator?(a(),O($l,{key:0,parent:le.value,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:j.value,onClose:se},null,8,["parent","backgroundColor","color","active"])):c("",!0),Ge.value?(a(),o("div",{key:1,ref_key:"noTitle",ref:De,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):c("",!0),e.value.style.chart.title.text?(a(),o("div",{key:2,style:"width:100%;background:transparent;padding-bottom:24px",onMouseleave:Ae},[(a(),O(gl,{key:`title_${be.value}`,config:{title:{cy:"donut-evolution-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-evolution-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],32)):c("",!0),e.value.userOptions.show&&D.value?(a(),O(bl,{ref:"details",key:`user_options_${ge.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:v(ke),isImaging:v(Ce),uid:E.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:B.value,titles:{...e.value.userOptions.buttonTitles},chartElement:le.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:j.value,onToggleFullscreen:Qe,onGeneratePdf:v(we),onGenerateCsv:Fe,onGenerateImage:v($e),onToggleTable:_e,onToggleAnnotator:se},vl({_:2},[t.$slots.optionPdf?{name:"optionPdf",fn:_(()=>[P(t.$slots,"optionPdf",{},void 0,!0)]),key:"0"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:_(()=>[P(t.$slots,"optionCsv",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:_(()=>[P(t.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:_(()=>[P(t.$slots,"optionTable",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:_(({toggleFullscreen:l,isFullscreen:n})=>[P(t.$slots,"optionFullscreen",q(J({toggleFullscreen:l,isFullscreen:n})),void 0,!0)]),key:"4"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:_(({toggleAnnotator:l,isAnnotator:n})=>[P(t.$slots,"optionAnnotator",q(J({toggleAnnotator:l,isAnnotator:n})),void 0,!0)]),key:"5"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasXls","hasTable","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):c("",!0),D.value?(a(),o("svg",{key:4,xmlns:v(cl),class:T({"vue-data-ui-fullscreen--on":B.value,"vue-data-ui-fulscreen--off":!B.value}),viewBox:`0 0 ${r.value.absoluteWidth} ${r.value.absoluteHeight}`,style:ve(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[dl(wl),d("defs",null,[d("linearGradient",{id:`hover_${E.value}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[d("stop",{offset:"0%","stop-color":v(U)(e.value.style.chart.backgroundColor,e.value.style.chart.layout.highlighter.opacity)},null,8,Sl),d("stop",{offset:"100%","stop-color":v(U)(e.value.style.chart.layout.highlighter.color,e.value.style.chart.layout.highlighter.opacity)},null,8,Fl)],8,Nl),d("radialGradient",{id:`focus_${E.value}`},[d("stop",{offset:"0%","stop-color":v(U)(v(re)(e.value.style.chart.backgroundColor),0)},null,8,Pl),d("stop",{offset:"77%","stop-color":v(U)("#FFFFFF",30)},null,8,Tl),d("stop",{offset:"100%","stop-color":v(U)(v(re)(e.value.style.chart.backgroundColor),0)},null,8,Hl)],8,_l)]),e.value.style.chart.layout.grid.show?(a(),o("g",Ol,[d("line",{x1:s.value.left,x2:s.value.left,y1:s.value.top,y2:s.value.top+r.value.height,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,El),d("line",{x1:s.value.left,x2:r.value.absoluteWidth-s.value.right,y1:r.value.absoluteHeight-s.value.bottom,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Wl),e.value.style.chart.layout.grid.showVerticalLines?(a(),o("g",Il,[(a(!0),o(m,null,k(y.value.end-y.value.start,(l,n)=>(a(),o("line",{x1:s.value.left+(n+1)*$.value,x2:s.value.left+(n+1)*$.value,y1:s.value.top,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Vl))),256))])):c("",!0)])):c("",!0),e.value.style.chart.layout.grid.yAxis.dataLabels.show?(a(),o("g",{key:1,class:T({"donut-opacity":!0,"donut-behind":f.value!==null||z.value})},[(a(!0),o(m,null,k(Ye.value,(l,n)=>(a(),o("g",null,[l.value>=W.value.min&&l.value<=W.value.max?(a(),o("line",{key:0,x1:s.value.left,x2:s.value.left-5,y1:l.y,y2:l.y,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth},null,8,Rl)):c("",!0),l.value>=W.value.min&&l.value<=W.value.max?(a(),o("text",{key:1,x:s.value.left-8+e.value.style.chart.layout.grid.yAxis.dataLabels.offsetX,y:l.y+e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize/3,"font-size":e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize,"text-anchor":"end",fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-weight":e.value.style.chart.layout.grid.yAxis.dataLabels.bold?"bold":"normal"},b(v(yl)(l.value)?v(ce)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(Q)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.grid.yAxis.dataLabels.roundingValue}),{datapoint:l,seriesIndex:n}):""),9,Ml)):c("",!0)]))),256))],2)):c("",!0),e.value.style.chart.layout.grid.xAxis.dataLabels.show?(a(),o("g",{key:2,class:T({"donut-opacity":!0,"donut-behind":z.value})},[(a(!0),o(m,null,k(y.value.end-y.value.start,(l,n)=>(a(),o("g",null,[e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast&&(n===0||n===M.value-1)||!e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast?(a(),o("text",{key:0,"text-anchor":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize,fill:e.value.style.chart.layout.grid.xAxis.dataLabels.color,transform:`translate(${s.value.left+$.value*n+$.value/2}, ${e.value.style.chart.layout.grid.xAxis.dataLabels.offsetY+r.value.absoluteHeight-s.value.bottom+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2}), rotate(${e.value.style.chart.layout.grid.xAxis.dataLabels.rotation})`},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(n)+Number(y.value.start)]??""),9,Bl)):c("",!0)]))),256))],2)):c("",!0),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("g",null,[e.value.style.chart.layout.line.show&&n<w.value.length-1&&![l.subtotal,w.value[n+1].subtotal].includes(null)?(a(),o("line",{key:0,class:T({"donut-opacity":!0,"donut-behind":f.value!==null||z.value}),x1:l.x,y1:l.y,x2:w.value[n+1].x,y2:w.value[n+1].y,stroke:e.value.style.chart.layout.line.stroke,"stroke-width":e.value.style.chart.layout.line.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"},null,10,Ul)):c("",!0),l.subtotal!==null?(a(),o("g",Dl,[l.subtotal?(a(),o("circle",{key:0,cx:l.x,cy:l.y,r:l.activeRadius,fill:e.value.style.chart.backgroundColor},null,8,Gl)):c("",!0)])):c("",!0)]))),256)),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||z.value})},[l.subtotal?(a(),o("g",Xl,[f.value!==null&&f.value===n?(a(),o("g",jl,[(a(!0),o(m,null,k(l.donutHover,u=>(a(),o("g",null,[d("path",{d:v(Ee)(u,{x:u.center.endX,y:u.center.endY},12,12,{x:l.x,y:l.y},!0,20),stroke:u.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,8,Yl)]))),256)),(a(!0),o(m,null,k(l.donutHover,(u,g)=>(a(),o("g",null,[d("text",{"data-cy-hover-label":"","text-anchor":v(Z)(u,!0,0).anchor,x:v(Z)(u,!0,3).x,y:v(Ie)(u),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":8,"font-weight":"bold"},b(u.name)+": "+b(Le(u,l.donut))+" ("+b(u.value===null?"-":X(u.value,u,g))+") ",9,Kl)]))),256)),d("g",null,[d("circle",{cx:l.x,cy:l.y,r:l.hoverRadius,fill:e.value.style.chart.backgroundColor},null,8,ql)])])):c("",!0)])):c("",!0)],2))),256)),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||z.value})},[l.subtotal!==null?(a(),o("g",Jl,[l.subtotal===0?(a(),o("circle",{key:0,cx:l.x,cy:l.y,r:3,fill:e.value.style.chart.color},null,8,Ql)):f.value!==null&&f.value===n?(a(),o("g",Zl,[(a(!0),o(m,null,k(l.donutHover,(u,g)=>(a(),o("path",{d:u.arcSlice,fill:`${u.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor},null,8,et))),256))])):(a(),o("g",lt,[(a(!0),o(m,null,k(l.donut,(u,g)=>(a(),o("path",{d:u.arcSlice,fill:`${u.color}`,"stroke-width":.5,stroke:e.value.style.chart.backgroundColor},null,8,tt))),256))]))])):c("",!0)],2))),256)),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||z.value})},[l.subtotal!==null&&e.value.style.chart.layout.dataLabels.show?(a(),o("text",{key:0,"text-anchor":"middle",x:l.x,y:f.value===l.index&&l.subtotal?l.y+e.value.style.chart.layout.dataLabels.fontSize/3:l.y-l.radius-e.value.style.chart.layout.dataLabels.fontSize+e.value.style.chart.layout.dataLabels.offsetY,"font-size":e.value.style.chart.layout.dataLabels.fontSize,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color},b(X(l.subtotal,l,n)),9,at)):c("",!0)],2))),256)),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("rect",{x:s.value.left+n*$.value,y:r.value.absoluteHeight-s.value.bottom-10,width:$.value,height:10,fill:f.value===l.index?`url(#hover_${E.value})`:"transparent",onClick:u=>oe(l,n),class:T({"donut-hover":f.value===l.index&&l.subtotal})},null,10,ot))),256)),(a(!0),o(m,null,k(w.value,(l,n)=>(a(),o("rect",{"data-cy-trap":"",x:s.value.left+n*$.value,y:s.value.top,width:$.value,height:r.value.height,fill:"transparent",onMouseenter:u=>Ke(l),onMouseleave:Ae,onClick:u=>oe(l,n),class:T({"donut-hover":f.value===l.index&&l.subtotal})},null,42,ut))),256)),z.value?(a(),o("g",st,[d("rect",{rx:4,x:s.value.left,y:s.value.top,width:r.value.width,height:r.value.height,fill:e.value.style.chart.backgroundColor,style:{filter:"drop-shadow(0 12px 12px rgba(0,0,0,0.3))"}},null,8,nt),d("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y1:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y2:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,rt),d("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y2:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y1:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,it),d("circle",{"data-cy-close":"",onClick:ze,onKeypress:hl(ze,["enter"]),cx:r.value.absoluteWidth-s.value.right-r.value.width/40,cy:s.value.top+r.value.height/30,r:r.value.height/12,fill:"transparent",style:{cursor:"pointer"},tabindex:"0"},null,40,vt),(a(!0),o(m,null,k(N.value.donutFocus,l=>(a(),o("g",null,[d("path",{"data-cy-zoom-donut":"",d:v(Ee)(l,{x:r.value.centerX,y:r.value.centerY},12,12,!1,!1,15),stroke:l.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",class:"vue-ui-donut-evolution-focus"},null,8,ct)]))),256)),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7,fill:e.value.style.chart.backgroundColor},null,8,dt),(a(!0),o(m,null,k(N.value.donutFocus,(l,n)=>(a(),o("path",{d:l.arcSlice,fill:`${l.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor,class:"vue-ui-donut-evolution-focus"},null,8,yt))),256)),(a(!0),o(m,null,k(N.value.donutFocus,(l,n)=>(a(),o("g",ht,[d("text",{"text-anchor":v(Z)(l,!0,20).anchor,x:v(Z)(l,!0,10).x,y:v(Ie)(l),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":10,"font-weight":"bold"},b(l.name)+": "+b(Le(l,N.value.donutFocus))+" ("+b(l.value===null?"-":X(l.value,l,n))+") ",9,gt)]))),256)),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/3.8,fill:`url(#focus_${E.value})`},null,8,ft),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7.7,fill:e.value.style.chart.backgroundColor},null,8,bt),d("text",{"text-anchor":"middle",x:s.value.left+r.value.width/2,y:s.value.top+r.value.height/2+14/3,"font-size":14,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color,class:"vue-ui-donut-evolution-focus"},b(X(N.value.subtotal,N.value,null)),9,pt),e.value.style.chart.layout.grid.xAxis.dataLabels.values[N.value.index]?(a(),o("text",{key:0,x:s.value.left+6,y:s.value.top+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2,"font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*1.6,fill:e.value.style.chart.layout.dataLabels.color},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(N.value.index)+Number(y.value.start)]),9,xt)):c("",!0)])):c("",!0),P(t.$slots,"svg",{svg:r.value},void 0,!0)],14,zl)):c("",!0),t.$slots.watermark?(a(),o("div",mt,[P(t.$slots,"watermark",q(J({isPrinting:v(ke)||v(Ce)})),void 0,!0)])):c("",!0),D.value?c("",!0):(a(),O(ml,{key:6,config:{type:"donutEvolution",style:{backgroundColor:e.value.style.chart.backgroundColor,donutEvolution:{axis:{color:"#CCCCCC"},donuts:{color:"#CCCCCC"}}}}},null,8,["config"])),M.value>1&&e.value.style.chart.zoom.show?(a(),O(kl,{key:`slicer_${fe.value}`,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,fontSize:e.value.style.chart.zoom.fontSize,useResetSlot:e.value.style.chart.zoom.useResetSlot,labelLeft:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.start)]||"",labelRight:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.end)-1]||"",textColor:e.value.style.chart.color,inputColor:e.value.style.chart.zoom.color,selectColor:e.value.style.chart.zoom.highlightColor,max:M.value,min:0,valueStart:y.value.start,valueEnd:y.value.end,start:y.value.start,"onUpdate:start":i[0]||(i[0]=l=>y.value.start=l),end:y.value.end,"onUpdate:end":i[1]||(i[1]=l=>y.value.end=l),onReset:ye},{"reset-action":_(({reset:l})=>[P(t.$slots,"reset-action",q(J({reset:l})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"])):c("",!0),e.value.style.chart.legend.show?(a(),O(xl,{key:`legend_${xe.value}`,legendSet:Ne.value,config:qe.value,onClickMarker:i[2]||(i[2]=({legend:l})=>ue(l.uid))},{item:_(({legend:l,index:n})=>[d("div",{"data-cy-legend-item":"",onClick:u=>ue(l.uid),style:ve(`opacity:${C.value.includes(l.uid)?.5:1}`)},[Ve(b(l.name)+": "+b(v(ce)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(Q)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,seriesIndex:n}))+" ",1),C.value.includes(l.uid)?(a(),o("span",wt," ( - % ) ")):(a(),o("span",Ct," ("+b(isNaN(l.value/Se.value)?"-":v(Q)({v:l.value/Se.value*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}))+") ",1))],12,kt)]),_:1},8,["legendSet","config"])):c("",!0),P(t.$slots,"legend",{legend:Ne.value},void 0,!0),t.$slots.source?(a(),o("div",$t,[P(t.$slots,"source",{},void 0,!0)],512)):c("",!0),D.value?(a(),O(Cl,{key:10,hideDetails:"",config:{open:G.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:_(()=>[(a(),O(pl,{key:`table_${pe.value}`,colNames:I.value.colNames,head:I.value.head,body:I.value.body,config:I.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:i[3]||(i[3]=l=>G.value.showTable=!1)},{th:_(({th:l})=>[Ve(b(l.name??l),1)]),td:_(({td:l})=>[l.value===null?(a(),o("span",Lt,"-")):(a(),o("b",At,b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.prefix)+b(!isNaN(l.value)&&l.value!==null?Number(l.value.toFixed(e.value.table.td.roundingValue)).toLocaleString():l)+b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.suffix),1)),d("span",null,b(l.percentage&&!isNaN(l.percentage)?`(${Number(l.percentage.toFixed(e.value.table.td.roundingPercentage)).toLocaleString()}%)`:""),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):c("",!0)],14,Al))}},Bt=Ll(zt,[["__scopeId","data-v-800b47b9"]]);export{Bt as default};
