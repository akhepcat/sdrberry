import{z as el,c as w,r as d,b as ll,B as tl,C as Be,Z as al,R as ol,A as V,H as ul,ac as sl,D as rl,w as Ge,E as il,Q as Me,F as nl,ai as vl,G as z,K as cl,V as dl,N as hl,o,a as s,i as j,L as v,m as g,j as yl,l as P,p as W,q as E,u as r,M as T,n as ve,J as fl,f as De,e as h,O as ee,P as b,k as A,a1 as pl,S as gl,T as bl,X as ml,aj as F,a2 as wl,U as I,h as k,Y as le,$ as p,g as Ve}from"./index-DWKgdAH2.js";import{O as xl,k as kl}from"./useResponsive-CoxXLe23-CoJWR8uA.js";import{x as $l}from"./Title-DyD-mBPN-Cd9Bnlgg.js";import{r as Cl,a as Pl}from"./usePrinter-CLcxWv-4-dA-zEbQs.js";import{W as _l}from"./DataTable-D8fcY_sJ-B-gWso_F.js";import{E as zl}from"./Tooltip-qod9o4Vz-BkuRNW4I.js";import{C as Fl}from"./Legend-BorSDXCj-BGlrHhi6.js";import Ll from"./vue-ui-skeleton-Dgzcn3FL-QTPCyjXQ.js";import Sl from"./vue-ui-accordion-m8rut1bP-BfpJTYkN.js";import{c as je}from"./useNestedProp-BxrcwmTZ-DuVaLmrv.js";import{p as Tl}from"./PackageVersion-mSsg8dpu-BMuAJ9y0.js";import{S as Il}from"./PenAndPaper-Dk41ZrJ0-DIRvLwPQ.js";import{s as Yl}from"./vue-data-ui-DF7u-eZV-BLQGmUKN.js";import"./Shape-DYFnvMNd-vb9KMPt_.js";const Xl=q=>(gl("data-v-897a9187"),q=q(),bl(),q),Al=["id"],Ol=["xmlns","viewBox"],Nl={key:0},Bl=["id"],Gl=["stop-color"],Ml=["offset","stop-color"],Dl=["offset","stop-color"],Vl=["stop-color"],jl={key:1},Hl=["id","cx","cy"],Rl=["stop-color","stop-opacity"],Wl=["stop-color"],El=["id"],ql=["id"],Ul=Xl(()=>h("feColorMatrix",{type:"saturate",values:"0"},null,-1)),Jl=["id"],Zl=["flood-color"],Kl=["id"],Ql=["flood-color"],et=["d","stroke","filter"],lt=["x1","y1","x2","y2","stroke","filter"],tt=["cx","cy","r","fill","filter"],at=["stroke","d"],ot=["d","fill","stroke","stroke-width","filter"],ut={key:0},st=["stroke","d"],rt={key:0},it=["d","stroke","stroke-width","filter"],nt=["d","fill","stroke","stroke-width","filter"],vt={key:1},ct=["cx","cy","r","fill","stroke","stroke-width"],dt=["cx","cy","r","stroke"],ht=["cx","cy","r","fill"],yt={key:0},ft=["d","fill","onMouseenter","onClick"],pt={key:1},gt=["cx","cy","r","fill"],bt=["x","y","fill","font-size"],mt=["x","y","fill","font-size"],wt=["x","y","fill","font-size"],xt=["x","y","fill","font-size"],kt=["filter"],$t={key:0},Ct=["x","y"],Pt={key:1},_t=["cx","cy","fill","stroke","filter","onClick"],zt=["cx","cy","fill","stroke","filter","onClick"],Ft=["text-anchor","x","y","fill","font-size","onClick"],Lt=["text-anchor","x","y","fill","font-size","onClick"],St=["text-anchor","x","y","fill","font-size","onClick"],Tt=["text-anchor","x","y","fill","font-size","onClick"],It={key:2},Yt=["x","y","width"],Xt=["x","y","width"],At={key:5,class:"vue-data-ui-watermark"},Ot=["onClick"],Nt={key:0,style:{"font-variant-numeric":"tabular-nums"}},Bt={key:1},Gt=["innerHTML"],Mt={__name:"vue-ui-donut",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(q,{expose:He,emit:ce}){const Y=q,{vue_ui_donut:Re}=el(),U=w({get(){return!!Y.dataset&&Y.dataset.length},set(t){return t}}),H=d(null),de=d(null),he=d(null),te=d(null),ye=d(null),fe=d(null),pe=d(0),ge=d(0),be=d(0);ll(()=>{me()}),sl(()=>{te.value&&te.value.disconnect()});function me(){if(tl(Y.dataset)?Be({componentName:"VueUiDonut",type:"dataset"}):Y.dataset.forEach((t,i)=>{al({datasetObject:t,requiredAttributes:["name","values"]}).forEach(l=>{U.value=!1,Be({componentName:"VueUiDonut",type:"datasetSerieAttribute",property:l,index:i})})}),e.value.responsive){const t=xl(()=>{const{width:i,height:l}=kl({chart:H.value,title:e.value.style.chart.title.text?de.value:null,legend:e.value.style.chart.legend.show?he.value:null,source:ye.value,noTitle:fe.value});u.value.width=i,u.value.height=l});te.value=new ResizeObserver(t),te.value.observe(H.value.parentNode)}}const m=d(rl()),We=d(null),ae=d(!1),se=d(""),_=d(null),we=d(0);function xe(){const t=je({userConfig:Y.config,defaultConfig:Re});return t.theme?{...je({userConfig:ul.vue_ui_donut[t.theme]||Y.config,defaultConfig:t}),customPalette:ol[t.theme]||V}:t}const e=w({get:()=>xe(),set:t=>t});Ge(()=>Y.config,t=>{e.value=xe(),me(),pe.value+=1,ge.value+=1,be.value+=1},{deep:!0});const{isPrinting:ke,isImaging:$e,generatePdf:Ce,generateImage:Pe}=Cl({elementId:`donut__${m.value}`,fileName:e.value.style.chart.title.text||"vue-ui-donut"}),Ee=w(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),_e=w(()=>il(e.value.customPalette)),y=d({dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}),u=d({height:360,width:512}),J=w(()=>{const t=e.value.style.chart.layout.donut.strokeWidth/512,i=u.value.width*t,l=i>$.value?$.value:i;return l<24?24:l}),M=w(()=>Y.dataset.map((t,i)=>({name:t.name,color:Me(t.color)||_e.value[i]||V[i]||V[i%V.length],value:t.values.reduce((l,a)=>l+a,0),absoluteValues:t.values,comment:t.comment||""}))),L=d(M.value);Ge(()=>M.value,t=>L.value=t);function qe(){return M.value.map(t=>({name:t.name,color:t.color,value:t.value}))}const X=d([]),ze=d(null),Fe=d(null),D=d(!1);function Le(t){const i=M.value.find((a,n)=>n===t);let l=L.value.find((a,n)=>n===t).value;if(X.value.includes(t)){let a=function(){l>n?(cancelAnimationFrame(ze.value),L.value=L.value.map((x,O)=>t===O?{...x,value:n}:x),D.value=!1):(D.value=!0,l+=n*.025,L.value=L.value.map((x,O)=>t===O?{...x,value:l}:x),ze.value=requestAnimationFrame(a))};X.value=X.value.filter(x=>x!==t);const n=i.value;a()}else if(X.value.length<M.value.length-1){let a=function(){l<.1?(cancelAnimationFrame(Fe.value),X.value.push(t),L.value=L.value.map((n,x)=>t===x?{...n,value:0}:n),D.value=!1):(D.value=!0,l/=1.1,L.value=L.value.map((n,x)=>t===x?{...n,value:l}:n),Fe.value=requestAnimationFrame(a))};a()}ce("selectLegend",N.value.map(a=>({name:a.name,color:a.color,value:a.value})))}const N=w(()=>(L.value.forEach((t,i)=>{if([null,void 0].includes(t.values))return{...t,values:[]}}),L.value.map((t,i)=>({...t,seriesIndex:i})).filter((t,i)=>!X.value.includes(i)))),Se=w(()=>Y.dataset.map((t,i)=>({name:t.name,color:Me(t.color)||_e.value[i]||V[i]||V[i%V.length],value:(t.values||[]).reduce((l,a)=>l+a,0),shape:"circle"})).map((t,i)=>({...t,proportion:t.value/Y.dataset.map(l=>(l.values||[]).reduce((a,n)=>a+n,0)).reduce((l,a)=>l+a,0),opacity:X.value.includes(i)?.5:1,segregate:()=>Le(i),isSegregated:X.value.includes(i)}))),Ue=w(()=>({cy:"donut-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),$=w(()=>{const t=Math.min(u.value.width/3,u.value.height/3);return t<55?55:t}),f=w(()=>nl({series:N.value},u.value.width/2,u.value.height/2,$.value,$.value,1.99999,2,1,360,105.25,J.value)),c=w(()=>{const t=Math.max(...N.value.map(l=>l.value)),i=N.value.map(l=>l.value/t);return vl({series:i,center:{x:u.value.width/2,y:u.value.height/2},maxRadius:Math.min(u.value.width,u.value.height)/3})});function R(t){return t.x>u.value.width/2+6?"start":t.x<u.value.width/2-6?"end":"middle"}function Je(t){return t.middlePoint.y>u.value.height/2?F({initX:t.middlePoint.x,initY:t.middlePoint.y,offset:100,centerX:u.value.width/2,centerY:u.value.height/2}).y:F({initX:t.middlePoint.x,initY:t.middlePoint.y,offset:0,centerX:u.value.width/2,centerY:u.value.height/2}).y-100}function S(t){return t.proportion*100>e.value.style.chart.layout.labels.dataLabels.hideUnderValue}function re(t,i){const l=t.value/Ze(i);return isNaN(l)?0:I(e.value.style.chart.layout.labels.percentage.formatter,l*100,z({v:l*100,s:"%",r:e.value.style.chart.layout.labels.percentage.rounding}),{datapoint:t})}function Ze(t){return[...t].map(i=>i.value).reduce((i,l)=>i+l,0)}const C=w(()=>N.value.map(t=>t.value).reduce((t,i)=>t+i,0)),Te=w(()=>C.value/N.value.length),ie=d(null),Z=d(!1);function Ie({datapoint:t,relativeIndex:i,seriesIndex:l,show:a=!1}){ie.value={datapoint:t,seriesIndex:l,config:e.value,series:M.value},ae.value=a,_.value=i;let n="";const x=e.value.style.chart.tooltip.customFormat;if(Z.value=!1,wl(x))try{const O=x({seriesIndex:l,datapoint:t,series:M.value,config:e.value});typeof O=="string"&&(se.value=O,Z.value=!0)}catch{console.warn("Custom format cannot be applied."),Z.value=!1}if(!Z.value){if(n+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${e.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${t.name}</div>`,n+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="${t.color}"/></svg>`,e.value.style.chart.tooltip.showValue&&(n+=`<b>${I(e.value.style.chart.layout.labels.value.formatter,t.value,z({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:t,relativeIndex:i,seriesIndex:l})}</b>`),e.value.style.chart.tooltip.showPercentage){const O=I(e.value.style.chart.layout.labels.percentage.formatter,t.proportion*100,z({v:t.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),{datapoint:t,relativeIndex:i,seriesIndex:l});e.value.style.chart.tooltip.showValue?n+=`<span>(${O})</span></div>`:n+=`<b>${O}</b></div>`}e.value.style.chart.comments.showInTooltip&&t.comment&&(n+=`<div class="vue-data-ui-tooltip-comment" style="background:${t.color}20; padding: 6px; margin-bottom: 6px; margin-top:6px; border-left: 1px solid ${t.color}">${t.comment}</div>`),se.value=`<div>${n}</div>`}}function K(t){return e.value.useBlurOnHover&&![null,void 0].includes(_.value)&&_.value!==t?`url(#blur_${m.value})`:""}const B=w(()=>{const t=N.value.map(l=>({name:l.name,color:l.color})),i=N.value.map(l=>l.value);return{head:t,body:i}});function Ye(){cl(()=>{const t=B.value.head.map((a,n)=>[[a.name],[B.value.body[n]],[isNaN(B.value.body[n]/C.value)?"-":B.value.body[n]/C.value*100]]),i=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(t),l=dl(i);hl({csvContent:l,title:e.value.style.chart.title.text||"vue-ui-donut"})})}const oe=w(()=>{const t=[' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>',z({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:C.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue}),"100%"],i=B.value.head.map((a,n)=>{const x=z({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:B.value.body[n],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue});return[{color:a.color,name:a.name},x,isNaN(B.value.body[n]/C.value)?"-":(B.value.body[n]/C.value*100).toFixed(e.value.table.td.roundingPercentage)+"%"]}),l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],head:t,body:i,config:l}}),Q=d(!1);function Ke(t){Q.value=t,we.value+=1}const Xe=w(()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent));function Qe(t){return t.toFixed(e.value.style.chart.legend.roundingPercentage).split("").map(i=>"-").join("")}function G(t,i){ce("selectDatapoint",{datapoint:t,index:i})}function Ae(){y.value.showTable=!y.value.showTable}function Oe(){y.value.dataLabels.show=!y.value.dataLabels.show}function Ne(){y.value.showTooltip=!y.value.showTooltip}const ue=d(!1);function ne(){ue.value=!ue.value}return He({getData:qe,generatePdf:Ce,generateCsv:Ye,generateImage:Pe,toggleTable:Ae,toggleLabels:Oe,toggleTooltip:Ne,toggleAnnotator:ne}),(t,i)=>(o(),s("div",{ref_key:"donutChart",ref:H,class:ve(`vue-ui-donut ${Q.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:T(`font-family:${e.value.style.fontFamily};width:100%; ${e.value.responsive?"height:100%;":""} text-align:center;background:${e.value.style.chart.backgroundColor}`),id:`donut__${m.value}`},[e.value.userOptions.buttons.annotator?(o(),j(Il,{key:0,parent:H.value,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:ue.value,onClose:ne},null,8,["parent","backgroundColor","color","active"])):v("",!0),g(t.$slots,"userConfig",{},void 0,!0),Ee.value?(o(),s("div",{key:1,ref_key:"noTitle",ref:fe,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):v("",!0),e.value.style.chart.title.text?(o(),s("div",{key:2,ref_key:"chartTitle",ref:de,style:"width:100%;background:transparent;padding-bottom:24px"},[(o(),j($l,{key:`title_${pe.value}`,config:{title:{cy:"donut-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):v("",!0),e.value.userOptions.show&&U.value?(o(),j(Pl,{ref_key:"details",ref:We,key:`user_option_${we.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:r(ke),isImaging:r($e),uid:m.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:Q.value,chartElement:H.value,position:e.value.userOptions.position,isTooltip:y.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:ue.value,onToggleFullscreen:Ke,onGeneratePdf:r(Ce),onGenerateCsv:Ye,onGenerateImage:r(Pe),onToggleTable:Ae,onToggleLabels:Oe,onToggleTooltip:Ne,onToggleAnnotator:ne},yl({_:2},[t.$slots.optionTooltip?{name:"optionTooltip",fn:P(()=>[g(t.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:P(()=>[g(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:P(()=>[g(t.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:P(()=>[g(t.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:P(()=>[g(t.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionLabels?{name:"optionLabels",fn:P(()=>[g(t.$slots,"optionLabels",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:P(({toggleFullscreen:l,isFullscreen:a})=>[g(t.$slots,"optionFullscreen",W(E({toggleFullscreen:l,isFullscreen:a})),void 0,!0)]),key:"6"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:P(({toggleAnnotator:l,isAnnotator:a})=>[g(t.$slots,"optionAnnotator",W(E({toggleAnnotator:l,isAnnotator:a})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasXls","hasTable","hasLabel","hasFullscreen","isFullscreen","chartElement","position","isTooltip","titles","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):v("",!0),U.value?(o(),s("svg",{key:4,xmlns:r(fl),class:ve({"vue-data-ui-fullscreen--on":Q.value,"vue-data-ui-fulscreen--off":!Q.value}),viewBox:`0 0 ${u.value.width<=0?10:u.value.width} ${u.value.height<=0?10:u.value.height}`,style:T(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[De(Tl),e.value.type==="classic"?(o(),s("defs",Nl,[e.value.style.chart.useGradient?(o(),s("radialGradient",{key:0,id:`gradient_${m.value}`},[h("stop",{offset:"0%","stop-color":r(ee)(e.value.style.chart.backgroundColor,0),"stop-opacity":"0"},null,8,Gl),h("stop",{offset:`${(1-J.value/$.value)*100}%`,"stop-color":r(ee)("#FFFFFF",0),"stop-opacity":"0"},null,8,Ml),h("stop",{offset:`${(1-J.value/$.value/2)*100}%`,"stop-color":r(ee)("#FFFFFF",e.value.style.chart.gradientIntensity)},null,8,Dl),h("stop",{offset:"100%","stop-color":r(ee)(e.value.style.chart.backgroundColor,0),"stop-opacity":"0"},null,8,Vl)],8,Bl)):v("",!0)])):v("",!0),e.value.type==="polar"?(o(),s("defs",jl,[(o(!0),s(b,null,A(c.value,(l,a)=>(o(),s("radialGradient",{id:`polar_gradient_${a}_${m.value}`,cx:l.middlePoint.x/u.value.width*100+"%",cy:l.middlePoint.y/u.value.height*100+"%",r:"62%"},[h("stop",{offset:"0%","stop-color":r(pl)(f.value[a].color,.05),"stop-opacity":e.value.style.chart.gradientIntensity/100},null,8,Rl),h("stop",{offset:"100%","stop-color":f.value[a].color},null,8,Wl)],8,Hl))),256))])):v("",!0),h("defs",null,[h("filter",{id:`blur_${m.value}`,x:"-50%",y:"-50%",width:"200%",height:"200%"},[h("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2,id:`blur_std_${m.value}`},null,8,ql),Ul],8,El),h("filter",{id:`shadow_${m.value}`,"color-interpolation-filters":"sRGB"},[h("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10","flood-opacity":"0.5","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,Zl)],8,Jl),h("filter",{id:`drop_shadow_${m.value}`,"color-interpolation-filters":"sRGB",x:"-50%",y:"-50%",width:"200%",height:"200%"},[h("feDropShadow",{dx:"0",dy:"0",stdDeviation:"3","flood-opacity":"1","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,Ql)],8,Kl)]),e.value.type==="classic"?(o(!0),s(b,{key:2},A(f.value,(l,a)=>(o(),s("g",null,[S(l)&&y.value.dataLabels.show?(o(),s("path",{key:0,d:r(ml)(l,{x:u.value.width/2,y:u.value.height/2},16,16,!1,!1,J.value),stroke:l.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",filter:K(a)},null,8,et)):v("",!0)]))),256)):v("",!0),e.value.type==="polar"?(o(!0),s(b,{key:3},A(f.value,(l,a)=>(o(),s("g",null,[S(l)&&y.value.dataLabels.show?(o(),s("line",{key:0,x1:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:24,centerX:u.value.width/2,centerY:u.value.height/2}).x,y1:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:24,centerX:u.value.width/2,centerY:u.value.height/2}).y,x2:c.value[a].middlePoint.x,y2:c.value[a].middlePoint.y,stroke:l.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",filter:K(a)},null,8,lt)):v("",!0)]))),256)):v("",!0),e.value.type==="classic"?(o(),s("circle",{key:4,cx:u.value.width/2,cy:u.value.height/2,r:$.value<=0?10:$.value,fill:e.value.style.chart.backgroundColor,filter:e.value.style.chart.layout.donut.useShadow?`url(#shadow_${m.value})`:""},null,8,tt)):v("",!0),C.value&&e.value.type==="classic"?(o(),s(b,{key:5},[(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{stroke:e.value.style.chart.backgroundColor,d:l.arcSlice,fill:"#FFFFFF"},null,8,at))),256)),(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{class:"vue-ui-donut-arc-path",d:l.arcSlice,fill:r(ee)(l.color,80),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:K(a)},null,8,ot))),256))],64)):v("",!0),C.value&&e.value.type==="polar"?(o(),s(b,{key:6},[f.value.length>1?(o(),s("g",ut,[(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{stroke:e.value.style.chart.backgroundColor,d:c.value[a].path,fill:"#FFFFFF"},null,8,st))),256)),e.value.style.chart.layout.donut.useShadow?(o(),s("g",rt,[(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{class:"vue-ui-donut-arc-path",d:c.value[a].path,fill:"transparent",stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:`url(#drop_shadow_${m.value})`},null,8,it))),256))])):v("",!0),(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{class:"vue-ui-donut-arc-path",d:c.value[a].path,fill:e.value.style.chart.useGradient?`url(#polar_gradient_${a}_${m.value})`:l.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:K(a)},null,8,nt))),256))])):(o(),s("g",vt,[h("circle",{cx:u.value.width/2,cy:u.value.height/2,r:$.value,fill:e.value.style.chart.useGradient?`url(#polar_gradient_0_${m.value})`:f.value[0].color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth},null,8,ct)]))],64)):(o(),s("circle",{key:7,cx:u.value.width/2,cy:u.value.height/2,r:$.value<=0?10:$.value,fill:"transparent",stroke:e.value.style.chart.backgroundColor},null,8,dt)),e.value.style.chart.useGradient&&e.value.type==="classic"?(o(),s("circle",{key:8,cx:u.value.width/2,cy:u.value.height/2,r:$.value<=0?10:$.value,fill:`url(#gradient_${m.value})`},null,8,ht)):v("",!0),C.value?(o(),s(b,{key:9},[f.value.length>1||e.value.type==="classic"?(o(),s("g",yt,[(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("path",{"data-cy-donut-trap":"",d:e.value.type==="classic"?l.arcSlice:c.value[a].path,fill:_.value===a?"rgba(0,0,0,0.1)":"transparent",onMouseenter:n=>Ie({datapoint:l,relativeIndex:a,seriesIndex:l.seriesIndex,show:!0}),onMouseleave:i[0]||(i[0]=n=>{ae.value=!1,_.value=null}),onClick:n=>G(l,a)},null,40,ft))),256))])):(o(),s("g",pt,[h("circle",{cx:u.value.width/2,cy:u.value.height/2,r:$.value,fill:_.value===t.i?"rgba(0,0,0,0.1)":"transparent","data-cy-donut-trap":"",onMouseenter:i[1]||(i[1]=l=>Ie({datapoint:f.value[0],relativeIndex:0,seriesIndex:f.value[0].seriesIndex,show:!0})),onMouseleave:i[2]||(i[2]=l=>{ae.value=!1,_.value=null}),onClick:i[3]||(i[3]=l=>G(f.value[0],t.i))},null,40,gt)]))],64)):v("",!0),e.value.type==="classic"?(o(),s(b,{key:10},[e.value.style.chart.layout.labels.hollow.total.show?(o(),s("text",{key:0,"text-anchor":"middle",x:u.value.width/2,y:u.value.height/2-(e.value.style.chart.layout.labels.hollow.average.show?e.value.style.chart.layout.labels.hollow.total.fontSize:0)+e.value.style.chart.layout.labels.hollow.total.offsetY,fill:e.value.style.chart.layout.labels.hollow.total.color,"font-size":e.value.style.chart.layout.labels.hollow.total.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.hollow.total.bold?"bold":""}`)},k(e.value.style.chart.layout.labels.hollow.total.text),13,bt)):v("",!0),e.value.style.chart.layout.labels.hollow.total.show?(o(),s("text",{key:1,"text-anchor":"middle",x:u.value.width/2,y:u.value.height/2+e.value.style.chart.layout.labels.hollow.total.fontSize-(e.value.style.chart.layout.labels.hollow.average.show?e.value.style.chart.layout.labels.hollow.total.fontSize:0)+e.value.style.chart.layout.labels.hollow.total.value.offsetY,fill:e.value.style.chart.layout.labels.hollow.total.value.color,"font-size":e.value.style.chart.layout.labels.hollow.total.value.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.hollow.total.value.bold?"bold":""}`)},k(r(I)(e.value.style.chart.layout.labels.hollow.total.value.formatter,C.value,r(z)({p:e.value.style.chart.layout.labels.hollow.total.value.prefix,v:C.value,s:e.value.style.chart.layout.labels.hollow.total.value.suffix}))),13,mt)):v("",!0),e.value.style.chart.layout.labels.hollow.average.show?(o(),s("text",{key:2,"text-anchor":"middle",x:u.value.width/2,y:u.value.height/2+(e.value.style.chart.layout.labels.hollow.total.show?e.value.style.chart.layout.labels.hollow.average.fontSize:0)+e.value.style.chart.layout.labels.hollow.average.offsetY,fill:e.value.style.chart.layout.labels.hollow.average.color,"font-size":e.value.style.chart.layout.labels.hollow.average.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.hollow.average.bold?"bold":""}`)},k(e.value.style.chart.layout.labels.hollow.average.text),13,wt)):v("",!0),e.value.style.chart.layout.labels.hollow.average.show?(o(),s("text",{key:3,"text-anchor":"middle",x:u.value.width/2,y:u.value.height/2+(e.value.style.chart.layout.labels.hollow.total.show?e.value.style.chart.layout.labels.hollow.average.fontSize:0)+e.value.style.chart.layout.labels.hollow.average.fontSize+e.value.style.chart.layout.labels.hollow.average.value.offsetY,fill:e.value.style.chart.layout.labels.hollow.average.value.color,"font-size":e.value.style.chart.layout.labels.hollow.average.value.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.hollow.average.value.bold?"bold":""}`)},k(D.value?"--":r(I)(e.value.style.chart.layout.labels.hollow.average.value.formatter,Te.value,r(z)({p:e.value.style.chart.layout.labels.hollow.average.value.prefix,v:Te.value,s:e.value.style.chart.layout.labels.hollow.average.value.suffix,r:e.value.style.chart.layout.labels.hollow.average.value.rounding}))),13,xt)):v("",!0)],64)):v("",!0),(o(!0),s(b,null,A(f.value,(l,a)=>(o(),s("g",{filter:K(a),class:ve({animated:e.value.useCssAnimation})},[e.value.style.chart.layout.labels.dataLabels.useLabelSlots?(o(),s("g",$t,[(o(),s("foreignObject",{x:r(p)(l,!0).anchor==="end"?r(p)(l).x-120:r(p)(l,!0).anchor==="middle"?r(p)(l).x-60:r(p)(l).x,y:r(le)(l)-(Xe.value?20:0),width:"120",height:"60",style:{overflow:"visible"}},[h("div",null,[g(t.$slots,"dataLabel",W(E({datapoint:l,isBlur:!e.value.useBlurOnHover||[null,void 0].includes(_.value)||_.value===a,isSafari:Xe.value,isVisible:S(l)&&y.value.dataLabels.show,textAlign:r(p)(l,!0,16,!0).anchor,flexAlign:r(p)(l,!0,16).anchor,percentage:re(l,f.value)})),void 0,!0)])],8,Ct))])):(o(),s("g",Pt,[e.value.type==="classic"?(o(),s(b,{key:0},[S(l)&&y.value.dataLabels.show?(o(),s("circle",{key:0,cx:r(p)(l).x,cy:r(le)(l)-3.5,fill:l.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":1,r:3,filter:!e.value.useBlurOnHover||[null,void 0].includes(_.value)||_.value===a?"":`url(#blur_${m.value})`,onClick:n=>G(l,a)},null,8,_t)):v("",!0)],64)):v("",!0),e.value.type==="polar"?(o(),s(b,{key:1},[S(l)&&y.value.dataLabels.show?(o(),s("circle",{key:0,cx:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:24,centerX:u.value.width/2,centerY:u.value.height/2}).x,cy:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:24,centerX:u.value.width/2,centerY:u.value.height/2}).y,fill:l.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":1,r:3,filter:!e.value.useBlurOnHover||[null,void 0].includes(_.value)||_.value===a?"":`url(#blur_${m.value})`,onClick:n=>G(l,a)},null,8,zt)):v("",!0)],64)):v("",!0),e.value.type==="classic"?(o(),s(b,{key:2},[S(l)&&y.value.dataLabels.show?(o(),s("text",{key:0,"text-anchor":r(p)(l,!0,12).anchor,x:r(p)(l,!0,12).x,y:r(le)(l),fill:e.value.style.chart.layout.labels.percentage.color,"font-size":e.value.style.chart.layout.labels.percentage.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.percentage.bold?"bold":""}`),onClick:n=>G(l,a)},k(re(l,f.value))+" "+k(e.value.style.chart.layout.labels.value.show?`(${r(I)(e.value.style.chart.layout.labels.value.formatter,l.value,r(z)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.value.rounding}),{datapoint:l})})`:""),13,Ft)):v("",!0),S(l)&&y.value.dataLabels.show?(o(),s("text",{key:1,"text-anchor":r(p)(l).anchor,x:r(p)(l,!0,12).x,y:r(le)(l)+e.value.style.chart.layout.labels.percentage.fontSize,fill:e.value.style.chart.layout.labels.name.color,"font-size":e.value.style.chart.layout.labels.name.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.name.bold?"bold":""}`),onClick:n=>G(l,a)},k(l.name),13,Lt)):v("",!0)],64)):v("",!0),e.value.type==="polar"?(o(),s(b,{key:3},[S(l)&&y.value.dataLabels.show?(o(),s("text",{key:0,"text-anchor":R(c.value[a].middlePoint),x:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).x,y:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).y,fill:e.value.style.chart.layout.labels.percentage.color,"font-size":e.value.style.chart.layout.labels.percentage.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.percentage.bold?"bold":""}`),onClick:n=>G(l,a)},k(re(l,f.value))+" "+k(e.value.style.chart.layout.labels.value.show?`(${r(I)(e.value.style.chart.layout.labels.value.formatter,l.value,r(z)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.value.rounding}),{datapoint:l})})`:""),13,St)):v("",!0),S(l)&&y.value.dataLabels.show?(o(),s("text",{key:1,"text-anchor":R(c.value[a].middlePoint),x:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).x,y:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).y+e.value.style.chart.layout.labels.percentage.fontSize,fill:e.value.style.chart.layout.labels.name.color,"font-size":e.value.style.chart.layout.labels.name.fontSize,style:T(`font-weight:${e.value.style.chart.layout.labels.name.bold?"bold":""}`),onClick:n=>G(l,a)},k(l.name),13,Tt)):v("",!0)],64)):v("",!0)])),y.value.dataLabels.show&&e.value.style.chart.comments.show&&l.comment?(o(),s("g",It,[S(l)&&e.value.type==="classic"?(o(),s("foreignObject",{key:0,x:e.value.style.chart.comments.offsetX+(r(p)(l,!0).anchor==="end"?r(p)(l).x-e.value.style.chart.comments.width:r(p)(l,!0).anchor==="middle"?r(p)(l).x-e.value.style.chart.comments.width/2:r(p)(l).x),y:r(le)(l)+24+e.value.style.chart.comments.offsetY,width:e.value.style.chart.comments.width,height:"200",style:{overflow:"visible","pointer-events":"none"}},[h("div",null,[g(t.$slots,"plot-comment",{plot:{...l,textAlign:r(p)(l,!0,16,!0).anchor,flexAlign:r(p)(l,!0,16).anchor}},void 0,!0)])],8,Yt)):v("",!0),S(l)&&e.value.type==="polar"?(o(),s("foreignObject",{key:1,x:e.value.style.chart.comments.offsetX+(R(c.value[a].middlePoint)==="end"?r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).x-e.value.style.chart.comments.width:R(c.value[a].middlePoint)==="middle"?r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).x-e.value.style.chart.comments.width/2:r(F)({initX:c.value[a].middlePoint.x,initY:c.value[a].middlePoint.y,offset:42,centerX:u.value.width/2,centerY:u.value.height/2}).x),y:Je(c.value[a])+e.value.style.chart.comments.offsetY,width:e.value.style.chart.comments.width,height:"200",style:{overflow:"visible","pointer-events":"none"}},[h("div",null,[g(t.$slots,"plot-comment",{plot:{...l,textAlign:R(c.value[a].middlePoint),flexAlign:R(c.value[a].middlePoint)}},void 0,!0)])],8,Xt)):v("",!0)])):v("",!0)],10,kt))),256)),g(t.$slots,"svg",{svg:u.value},void 0,!0)],14,Ol)):v("",!0),t.$slots.watermark?(o(),s("div",At,[g(t.$slots,"watermark",W(E({isPrinting:r(ke)||r($e)})),void 0,!0)])):v("",!0),U.value?v("",!0):(o(),j(Ll,{key:6,config:{type:"donut",style:{backgroundColor:e.value.style.chart.backgroundColor,donut:{color:"#CCCCCC",strokeWidth:J.value*.8}}}},null,8,["config"])),h("div",{ref_key:"chartLegend",ref:he},[e.value.style.chart.legend.show?(o(),j(Fl,{key:`legend_${be.value}`,legendSet:Se.value,config:Ue.value,onClickMarker:i[4]||(i[4]=({i:l})=>Le(l))},{item:P(({legend:l,index:a})=>[h("div",{onClick:n=>l.segregate(),style:T(`opacity:${X.value.includes(a)?.5:1}`)},[Ve(k(l.name)+": "+k(r(I)(e.value.style.chart.layout.labels.value.formatter,l.value,r(z)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,index:a}))+" ",1),X.value.includes(a)?(o(),s("span",Bt," ( "+k(Qe(l.proportion*100))+" % ) ",1)):(o(),s("span",Nt," ("+k(isNaN(l.value/C.value)?"-":r(I)(e.value.style.chart.layout.labels.percentage.formatter,D.value?l.proportion*100:l.value/C.value*100,r(z)({v:D.value?l.proportion*100:l.value/C.value*100,s:"%",r:e.value.style.chart.legend.roundingPercentage})))+") ",1))],12,Ot)]),_:1},8,["legendSet","config"])):v("",!0),g(t.$slots,"legend",{legend:Se.value},void 0,!0)],512),t.$slots.source?(o(),s("div",{key:7,ref_key:"source",ref:ye,dir:"auto"},[g(t.$slots,"source",{},void 0,!0)],512)):v("",!0),De(zl,{show:y.value.showTooltip&&ae.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:H.value,content:se.value,isCustom:Z.value},{"tooltip-before":P(()=>[g(t.$slots,"tooltip-before",W(E({...ie.value})),void 0,!0)]),"tooltip-after":P(()=>[g(t.$slots,"tooltip-after",W(E({...ie.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isCustom"]),U.value?(o(),j(Sl,{key:8,hideDetails:"",config:{open:y.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:P(()=>[(o(),j(_l,{key:`table_${ge.value}`,colNames:oe.value.colNames,head:oe.value.head,body:oe.value.body,config:oe.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:i[5]||(i[5]=l=>y.value.showTable=!1)},{th:P(({th:l})=>[h("div",{innerHTML:l,style:{display:"flex","align-items":"center"}},null,8,Gt)]),td:P(({td:l})=>[Ve(k(l.name?l.name:isNaN(Number(l))?l.includes("%")?l:r(I)(e.value.style.chart.layout.labels.percentage.formatter,l,r(z)({v:l,s:"%",r:e.value.style.chart.layout.labels.percentage.rounding})):r(I)(e.value.style.chart.layout.labels.value.formatter,l,r(z)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.value.rounding}))),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):v("",!0)],14,Al))}},la=Yl(Mt,[["__scopeId","data-v-897a9187"]]);export{la as default};
