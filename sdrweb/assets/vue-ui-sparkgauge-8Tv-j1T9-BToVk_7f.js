import{z as q,c as o,b as M,B as D,C as _,Z as G,r as B,D as H,H as U,w as S,ap as Z,o as i,a as r,M as y,h as m,L as v,u as d,J as E,f as F,e as c,n as J,U as Y,a0 as g,G as P,i as Q,m as W}from"./index-Cv_R0XUS.js";import{c as A}from"./useNestedProp-BxrcwmTZ-D4WcyZ8s.js";import I from"./vue-ui-skeleton-Dgzcn3FL-DASnd3oG.js";import{p as K}from"./PackageVersion-mSsg8dpu-Bg2p7G7d.js";import"./vue-data-ui-DF7u-eZV-BhlwTQFl.js";const R=["xmlns","viewBox"],T=["id"],X=["stop-color"],ee=["stop-color"],ae=["d","stroke","stroke-linecap"],te=["d","stroke","stroke-linecap","stroke-dashoffset"],le=["x","y","font-size","fill","font-weight"],se={key:4,ref:"source",dir:"auto"},ve={__name:"vue-ui-sparkgauge",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(j){const l=j,{vue_ui_sparkgauge:N}=q(),p=o(()=>!!l.dataset&&Object.keys(l.dataset).length);M(()=>{k()});function k(){D(l.dataset)?_({componentName:"VueUiSparkgauge",type:"dataset"}):G({datasetObject:l.dataset,requiredAttributes:["value","min","max"]}).forEach(a=>{_({componentName:"VueUiSparkgauge",type:"datasetAttribute",property:a})})}const b=B(H()),e=o({get:()=>h(),set:a=>a});function h(){const a=A({userConfig:l.config,defaultConfig:N});return a.theme?{...A({userConfig:U.vue_ui_sparkgauge[a.theme]||l.config,defaultConfig:a})}:a}S(()=>l.config,a=>{e.value=h(),k()},{deep:!0});const u=o(()=>({height:e.value.style.height,width:128,base:e.value.style.basePosition})),s=o(()=>{const a=l.dataset.min??0,n=l.dataset.max??0,V=n-a;return{min:a,max:n,diff:V}}),t=B(e.value.style.animation.show?s.value.min:l.dataset.value);S(()=>l.dataset.value,()=>{w(l.dataset.value||0)});const x=o(()=>t.value>s.value.max?s.value.max:t.value<s.value.min?s.value.min:t.value),$=o(()=>s.value.diff/e.value.style.animation.speedMs);M(()=>{w(l.dataset.value||0)});function w(a){function n(){t.value<a?t.value=Math.min(t.value+$.value,a):t.value>a&&(t.value=Math.max(t.value-$.value,a)),t.value!==a&&requestAnimationFrame(n)}n()}const f=o(()=>l.dataset.title??""),C=o(()=>t.value>=0?(x.value-s.value.min)/s.value.diff:(Math.abs(s.value.min)-Math.abs(x.value))/s.value.diff),L=o(()=>Z(e.value.style.colors.min,e.value.style.colors.max,s.value.min,s.value.max,t.value)),z=o(()=>e.value.style.dataLabel.autoColor?L.value:e.value.style.dataLabel.color),O=o(()=>e.value.style.track.autoColor?L.value:e.value.style.track.color);return(a,n)=>(i(),r("div",{style:y(`font-family:${e.value.style.fontFamily};width: 100%; background:${e.value.style.background}`)},[e.value.style.title.show&&f.value&&e.value.style.title.position==="top"?(i(),r("div",{key:0,class:"vue-data-ui-sparkgauge-label",style:y(`font-size:${e.value.style.title.fontSize}px;text-align:${e.value.style.title.textAlign};font-weight:${e.value.style.title.bold?"bold":"normal"};color:${e.value.style.title.color}`)},m(f.value),5)):v("",!0),p.value?(i(),r("svg",{key:1,xmlns:d(E),viewBox:`0 0 ${u.value.width} ${u.value.height}`,style:"overflow: visible; background:transparent; width:100%;"},[F(K),c("defs",null,[c("linearGradient",{id:`gradient_${b.value}`,x1:"-10%",y1:"100%",x2:"110%",y2:"100%"},[c("stop",{offset:"0%","stop-color":e.value.style.colors.min},null,8,X),c("stop",{offset:"100%","stop-color":e.value.style.colors.max},null,8,ee)],8,T)]),c("path",{d:`M10 ${u.value.base} A 1 1 0 1 1 118 ${u.value.base}`,stroke:e.value.style.gutter.color,"stroke-width":8,"stroke-linecap":e.value.style.gutter.strokeLinecap,fill:"none"},null,8,ae),C.value!==0?(i(),r("path",{key:0,d:`M10 ${u.value.base} A 1 1 0 1 1 118 ${u.value.base}`,stroke:e.value.style.colors.showGradient?`url(#gradient_${b.value})`:O.value,"stroke-width":8,"stroke-linecap":e.value.style.track.strokeLinecap,fill:"none","stroke-dasharray":169.5,"stroke-dashoffset":169.5-169.5*C.value,class:J({"vue-ui-sparkgauge-track":e.value.style.animation.show}),style:y(e.value.style.animation.show?`animation: vue-ui-sparkgauge-animation ${e.value.style.animation.speedMs}ms ease-in;`:"")},null,14,te)):v("",!0),c("text",{"text-anchor":"middle",x:u.value.width/2,y:u.value.base+6+e.value.style.dataLabel.offsetY,"font-size":e.value.style.dataLabel.fontSize,fill:z.value,"font-weight":e.value.style.dataLabel.bold?"bold":"normal"},m(d(Y)(e.value.style.dataLabel.formatter,d(g)(t.value),d(P)({p:e.value.style.dataLabel.prefix,v:d(g)(t.value),s:e.value.style.dataLabel.suffix,r:e.value.style.dataLabel.rounding}),{datapoint:d(g)(t.value),color:z.value})),9,le)],8,R)):v("",!0),p.value?v("",!0):(i(),Q(I,{key:2,config:{type:"gauge",style:{backgroundColor:e.value.style.background,gauge:{color:"#CCCCCC"}}}},null,8,["config"])),e.value.style.title.show&&f.value&&e.value.style.title.position==="bottom"?(i(),r("div",{key:3,class:"vue-data-ui-sparkgauge-label",style:y(`font-size:${e.value.style.title.fontSize}px;text-align:${e.value.style.title.textAlign};font-weight:${e.value.style.title.bold?"bold":"normal"};font-weight:${e.value.style.title.bold?"bold":"normal"};color:${e.value.style.title.color}`)},m(f.value),5)):v("",!0),a.$slots.source?(i(),r("div",se,[W(a.$slots,"source")],512)):v("",!0)],4))}};export{ve as default};
