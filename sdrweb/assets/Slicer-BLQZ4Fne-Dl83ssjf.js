import{af as K,c as m,r as f,D as Y,w as F,b as ee,ac as le,aw as I,av as E,o as p,a as h,e as i,m as ae,M as S,f as te,L as w,u as ie,J as ue,S as ne,T as oe,P as A,k as R,a5 as B,a7 as P,h as D}from"./index-DU9YtjQY.js";import{s as re,u as se}from"./vue-data-ui-DF7u-eZV-CTKmBAIv.js";import{O as me,k as ve}from"./useResponsive-CoxXLe23-CoJWR8uA.js";const O=l=>(ne("data-v-ed77abe8"),l=l(),oe(),l),de={"data-html2canvas-ignore":"",style:{padding:"0 24px"},class:"vue-data-ui-zoom"},pe={class:"vue-data-ui-slicer-labels",style:{position:"relative","z-index":"1","pointer-events":"none"}},he={key:0,style:{width:"100%",position:"relative"}},ce={key:0,class:"minimap",style:{width:"100%"}},fe=["xmlns","viewBox"],xe=["id"],ye=["stop-color"],ge=O(()=>i("stop",{offset:"100%","stop-color":"transparent"},null,-1)),be=["d","stroke"],Se=["x","width","height","fill","rx"],ke=["d","fill"],we=["x","width","height","rx","fill"],Ne=["x","width","height","fill","rx"],$e=["d","fill"],Ce=["d","stroke"],Me=["cx","cy","stroke","fill"],Fe=["cx","cy","stroke","fill"],Le=["x1","x2","y2","stroke"],ze=["x","height","width","onMouseenter"],Ie=O(()=>i("div",{class:"slider-track"},null,-1)),Ee=["min","max"],Ae=["min","max"],Re={__name:"Slicer",props:{background:{type:String,default:"#FFFFFF"},borderColor:{type:String,default:"#FFFFFF"},fontSize:{type:Number,default:14},labelLeft:{type:String,default:""},labelRight:{type:String,default:""},textColor:{type:String,default:"#1A1A1A"},inputColor:{type:String,default:"#1A1A1A"},max:{type:Number,default:0},min:{type:Number,default:0},selectColor:{type:String,default:"#4A4A4A"},useResetSlot:{type:Boolean,default:!1},valueStart:{type:[Number,String],default:0},valueEnd:{type:[Number,String],default:0},minimap:{type:Array,default:[]},smoothMinimap:{type:Boolean,default:!1},minimapSelectedColor:{type:String,default:"#1f77b4"},minimapSelectionRadius:{type:Number,default:12},minimapLineColor:{type:String,default:"#2D353C"},minimapSelectedColorOpacity:{type:Number,default:.2},minimapSelectedIndex:{type:Number,default:null},minimapIndicatorColor:{type:String,default:"#2D353C"}},emits:["update:start","update:end","reset","trapMouse"],setup(l,{emit:x}){const e=l;K(a=>({"724603fa":V.value,"0a3b8c6e":g.value,"31bae142":j.value,"2b1e64c4":l.selectColor,"7b29392c":_.value}));const o=f(e.min),r=f(e.max),y=m(()=>!!e.minimap.length),N=f(Y()),U=m(()=>{const a=e.max-e.min,u=(o.value-e.min)/a*100,n=(r.value-e.min)/a*100;return{left:`${u}%`,width:`${n-u}%`,background:e.selectColor}}),V=m(()=>e.inputColor),_=m(()=>e.background),j=m(()=>`${e.selectColor}33`),g=m(()=>e.borderColor),L=m(()=>{let a=[];for(let u=0;u<e.minimap.length;u+=1)a.push(u);return a});function z(){x("reset")}function J(){Number(o.value)>Number(r.value)-1&&(o.value=Number(r.value)-1),x("update:start",Number(o.value))}function T(){Number(r.value)<Number(o.value)+1&&(r.value=Number(o.value)+1),x("update:end",Number(r.value))}F(()=>e.min,a=>{Number(o.value)<Number(a)&&(o.value=Number(a)),Number(r.value)<Number(a)&&(r.value=Number(a))}),F(()=>e.max,a=>{Number(o.value)>Number(a)&&(o.value=Number(a)),Number(r.value)>Number(a)&&(r.value=Number(a))});const $=f(null),t=f({width:1,height:1}),k=f(null);ee(()=>{if(y.value){const a=me(()=>{const{width:u,height:n}=ve({chart:$.value});t.value.width=u,t.value.height=n-47});k.value=new ResizeObserver(a),k.value.observe($.value)}}),le(()=>{k.value&&k.value.disconnect()});const s=m(()=>e.minimap.length?t.value.width/e.minimap.length:0),v=m(()=>{if(!e.minimap.length)return[];const a=Math.max(...e.minimap),u=Math.min(...e.minimap)-10,n=a-(u>0?0:u),d=e.minimap.map((Q,X)=>{const H=Q-u;return{x:t.value.width/e.minimap.length*X+s.value/2,y:t.value.height-H/n*(t.value.height*.9)}}),C=e.smoothMinimap?I(d):E(d),M=[...d].slice(e.valueStart,e.valueEnd),q=e.smoothMinimap?I(M):E(M);return{fullSet:C,selectionSet:q,sliced:M,firstPlot:d[e.valueStart],lastPlot:d[e.valueEnd-1]}}),c=m(()=>({x:s.value*o.value+s.value/2,width:t.value.width*((r.value-o.value)/e.max)-s.value})),Z=m(()=>({left:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",pointerEvents:"none"})),G=m(()=>({right:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",direction:"rtl",pointerEvents:"none"})),b=f(e.minimapSelectedIndex);F(()=>e.minimapSelectedIndex,a=>{b.value=a+e.valueStart},{immediate:!0});function W(a){b.value=a,a>=e.valueStart&&a<e.valueEnd&&x("trapMouse",a-e.valueStart)}return(a,u)=>(p(),h("div",de,[i("div",pe,[l.valueStart>0||l.valueEnd<l.max?(p(),h("div",he,[l.useResetSlot?ae(a.$slots,"reset-action",{key:1,reset:z},void 0,!0):(p(),h("button",{key:0,"data-cy-reset":"",tabindex:"0",role:"button",class:"vue-data-ui-refresh-button",style:S({top:y.value?"36px":"-16px",pointerEvents:"all !important"}),onClick:z},[te(se,{name:"refresh",stroke:l.textColor},null,8,["stroke"])],4))])):w("",!0)]),i("div",{class:"double-range-slider",ref_key:"minimapWrapper",ref:$,style:{"z-index":"0"}},[y.value?(p(),h("div",ce,[(p(),h("svg",{xmlns:ie(ue),viewBox:`0 0 ${t.value.width<0?0:t.value.width} ${t.value.height<0?0:t.value.height}`},[i("defs",null,[i("linearGradient",{id:N.value,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[i("stop",{offset:"0%","stop-color":`${l.minimapLineColor}50`},null,8,ye),ge],8,xe)]),i("path",{d:`M${v.value.fullSet}`,stroke:`${l.minimapLineColor}`,fill:"none","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",style:{opacity:"1"}},null,8,be),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:Math.max(t.value.height,0),y:0,fill:g.value,rx:l.minimapSelectionRadius,stroke:"none"},null,8,Se),i("path",{d:`M${s.value/2},${Math.max(t.value.height,0)} ${v.value.fullSet} L${t.value.width-s.value/2},${Math.max(t.value.height,0)}Z`,fill:`url(#${N.value})`,stroke:"none",style:{opacity:"1"}},null,8,ke),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:Math.max(t.value.height,0),y:0,rx:l.minimapSelectionRadius,fill:g.value},null,8,we),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:Math.max(t.value.height,0),y:0,fill:l.minimapSelectedColor,rx:l.minimapSelectionRadius,style:S({opacity:l.minimapSelectedColorOpacity})},null,12,Ne),i("path",{d:`M${v.value.sliced[0].x},${Math.max(t.value.height,0)} ${v.value.selectionSet} L${v.value.sliced.at(-1).x},${Math.max(t.value.height,0)}Z`,fill:`url(#${N.value})`,stroke:"none",style:{opacity:"1"}},null,8,$e),i("path",{d:`M ${v.value.selectionSet}`,stroke:`${l.minimapLineColor}`,fill:"transparent","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ce),i("circle",{cx:v.value.firstPlot.x,cy:v.value.firstPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,Me),i("circle",{cx:v.value.lastPlot.x,cy:v.value.lastPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,Fe),b.value!==null?(p(!0),h(A,{key:0},R(L.value,(n,d)=>(p(),h("g",null,[b.value===n&&n>=l.valueStart&&n<l.valueEnd?(p(),h("line",{key:0,x1:s.value*d+s.value/2,x2:s.value*d+s.value/2,y1:0,y2:Math.max(t.value.height,0),stroke:l.minimapIndicatorColor,"stroke-linecap":"round","stroke-dasharray":"2","stroke-width":"1"},null,8,Le)):w("",!0)]))),256)):w("",!0),(p(!0),h(A,null,R(L.value,(n,d)=>(p(),h("rect",{x:s.value*d,y:0,height:Math.max(t.value.height,0),width:s.value<0?0:s.value,fill:"transparent",style:{"pointer-events":"all !important"},onMouseenter:C=>W(n),onMouseleave:u[0]||(u[0]=C=>{b.value=null,x("trapMouse",null)})},null,40,ze))),256))],8,fe))])):w("",!0),Ie,i("div",{class:"range-highlight",style:S(U.value)},null,4),B(i("input",{type:"range",class:"range-left",min:l.min,max:l.max,"onUpdate:modelValue":u[1]||(u[1]=n=>o.value=n),onInput:J},null,40,Ee),[[P,o.value]]),i("div",{class:"thumb-label thumb-label-left",style:S(Z.value)},D(l.labelLeft),5),B(i("input",{type:"range",class:"range-right",min:l.min,max:l.max,"onUpdate:modelValue":u[2]||(u[2]=n=>r.value=n),onInput:T},null,40,Ae),[[P,r.value]]),i("div",{class:"thumb-label thumb-label-right",style:S(G.value)},D(l.labelRight),5)],512)]))}},Oe=re(Re,[["__scopeId","data-v-ed77abe8"]]);export{Oe as U};
