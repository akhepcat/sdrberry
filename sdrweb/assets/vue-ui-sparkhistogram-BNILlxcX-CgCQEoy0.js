import{af as T,c as x,z as Z,H as K,b as Q,B as ee,C as H,Z as le,r as B,D as te,w as ae,O as h,o as a,a as s,M as _,e as c,g as se,h as b,u as n,U as D,G as N,L as p,J as oe,f as ie,P as f,k as g,a1 as L,n as V,i as W,m as ue}from"./index-Cv_R0XUS.js";import{c as G}from"./useNestedProp-BxrcwmTZ-D4WcyZ8s.js";import{$ as re}from"./Shape-DYFnvMNd-_HVH9nrS.js";import ne from"./vue-ui-skeleton-Dgzcn3FL-DASnd3oG.js";import{p as ve}from"./PackageVersion-mSsg8dpu-Bg2p7G7d.js";import{s as de}from"./vue-data-ui-DF7u-eZV-BhlwTQFl.js";const ye={key:0},ce={key:1},pe=["xmlns","viewBox"],fe=["id"],ge=["stop-color"],he=["stop-color"],be=["id"],me=["stop-color"],xe=["stop-color"],ke=["id"],we=["stop-color"],$e=["stop-color"],_e={key:0},Ce=["x","y","height","width","fill","stroke","stroke-width","rx"],ze={key:1},Le=["x","y","font-size","font-weight","fill"],Se=["x","y","font-size","fill"],Me=["x","y","font-size","fill"],Ae=["height","width","x","onMouseover","stroke","stroke-width","rx","stroke-dasharray","onClick"],He={key:2,ref:"source",dir:"auto"},Be={__name:"vue-ui-sparkhistogram",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectDatapoint"],setup(O,{emit:j}){const v=O;T(t=>({"3d57fabd":I.value}));const{vue_ui_sparkhistogram:q}=Z(),S=x(()=>!!v.dataset&&v.dataset.length);Q(()=>{M()});function M(){ee(v.dataset)?H({componentName:"VueUiSparkHistogram",type:"dataset"}):v.dataset.forEach((t,u)=>{le({datasetObject:t,requiredAttributes:["value"]}).forEach(l=>{H({componentName:"VueUiSparkHistogram",type:"datasetSerieAttribute",property:l,index:u})})})}const m=B(te()),e=x({get:()=>A(),set:t=>t});function A(){const t=G({userConfig:v.config,defaultConfig:q});return t.theme?{...G({userConfig:K.vue_ui_sparkhistogram[t.theme]||v.config,defaultConfig:t})}:t}ae(()=>v.config,t=>{e.value=A(),M()},{deep:!0});const d=x(()=>{const t=e.value.style.layout.height,u=e.value.style.layout.width,l=e.value.style.layout.padding.top,o=t-e.value.style.layout.padding.bottom,y=e.value.style.layout.padding.left,k=u-e.value.style.layout.padding.right,w=l+(t-l-e.value.style.layout.padding.bottom)/2,C=t-e.value.style.layout.padding.top-e.value.style.layout.padding.bottom,$=u-e.value.style.layout.padding.left-e.value.style.layout.padding.right;return{bottom:o,centerY:w,drawingHeight:C,drawingWidth:$,height:t,left:y,right:k,top:l,width:u}}),U=x(()=>Math.max(...v.dataset.map(t=>Math.abs(t.value||0))));function Y(t){return Math.abs(t)/U.value}const r=x(()=>v.dataset.map((t,u)=>{const l=Y(t.value||0),o=d.value.drawingHeight*l,y=d.value.drawingWidth/v.dataset.length,k=y*(e.value.style.bars.gap/100),w=y-k,C=d.value.centerY-o/2,$=d.value.left+(k/2+u*y),R=d.value.left+u*y,z=typeof t.intensity>"u"?100:Math.round(t.intensity*100),X=t.color?t.color:t.value>=0?h(e.value.style.bars.colors.positive,z):h(e.value.style.bars.colors.negative,z),F=t.color?t.color:t.value>=0?e.value.style.bars.colors.positive:e.value.style.bars.colors.negative,J=t.color?`url(#gradient_datapoint_${u}_${m.value})`:t.value>=0?`url(#gradient_positive_${u}_${m.value})`:`url(#gradient_negative_${u}_${m.value})`,P=$+w/2;return{...t,color:X,gradient:J,height:o,intensity:z,proportion:l,stroke:F,textAnchor:P,trapX:R,unitWidth:y,width:w,x:$,y:C}})),i=B(null);function E(t,u){j("selectDatapoint",{datapoint:t,index:u})}const I=x(()=>`${e.value.style.animation.speedMs}ms`);return(t,u)=>(a(),s("div",{style:_(`width:100%;background:${e.value.style.backgroundColor};font-family:${e.value.style.fontFamily}`),onMouseleave:u[1]||(u[1]=l=>i.value=null)},[e.value.style.title.text?(a(),s("div",{key:0,style:_(`width:calc(100% - 12px);background:transparent;margin:0 auto;margin:${e.value.style.title.margin};padding: 0 6px;text-align:${e.value.style.title.textAlign}`)},[c("div",{style:_(`font-size:${e.value.style.title.fontSize}px;color:${e.value.style.title.color};font-weight:${e.value.style.title.bold?"bold":"normal"}`)},[se(b(e.value.style.title.text)+" ",1),i.value!==null?(a(),s("span",ye,"- "+b(r.value[i.value].timeLabel||"")+" "+b(n(D)(e.value.style.labels.value.formatter,r.value[i.value].value,n(N)({p:e.value.style.labels.value.prefix,v:r.value[i.value].value,s:e.value.style.labels.value.suffix,r:e.value.style.labels.value.rounding}),{datapoint:r.value[i.value],seriesIndex:i.value})),1)):p("",!0),![void 0,null].includes(i.value)&&![null,void 0].includes(r.value[i.value].valueLabel)?(a(),s("span",ce,"("+b(r.value[i.value].valueLabel||0)+")",1)):p("",!0)],4),e.value.style.title.subtitle.text?(a(),s("div",{key:0,style:_(`font-size:${e.value.style.title.subtitle.fontSize}px;color:${e.value.style.title.subtitle.color};font-weight:${e.value.style.title.subtitle.bold?"bold":"normal"}`)},b(e.value.style.title.subtitle.text),5)):p("",!0)],4)):p("",!0),S.value?(a(),s("svg",{key:1,xmlns:n(oe),viewBox:`0 0 ${d.value.width} ${d.value.height}`,style:{overflow:"visible"}},[ie(ve),c("defs",null,[(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("radialGradient",{id:`gradient_positive_${o}_${m.value}`,cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[c("stop",{offset:"0%","stop-color":n(h)(n(L)(e.value.style.bars.colors.positive,.05),l.intensity)},null,8,ge),c("stop",{offset:"100%","stop-color":n(h)(e.value.style.bars.colors.positive,l.intensity)},null,8,he)],8,fe))),256)),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("radialGradient",{id:`gradient_negative_${o}_${m.value}`,cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[c("stop",{offset:"0%","stop-color":n(h)(n(L)(e.value.style.bars.colors.negative,.05),l.intensity)},null,8,me),c("stop",{offset:"100%","stop-color":n(h)(e.value.style.bars.colors.negative,l.intensity)},null,8,xe)],8,be))),256)),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("radialGradient",{id:`gradient_datapoint_${o}_${m.value}`,cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[c("stop",{offset:"0%","stop-color":n(h)(n(L)(l.color,.05),l.intensity)},null,8,we),c("stop",{offset:"100%","stop-color":n(h)(l.color,l.intensity)},null,8,$e)],8,ke))),256))]),!e.value.style.bars.shape||e.value.style.bars.shape==="square"?(a(),s("g",_e,[(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("rect",{x:l.x,y:l.y,height:l.height,width:l.width,fill:e.value.style.bars.colors.gradient.show?l.gradient:l.color,stroke:l.stroke,"stroke-width":e.value.style.bars.strokeWidth,rx:`${e.value.style.bars.borderRadius*l.proportion/12}%`,class:V({"vue-ui-sparkhistogram-shape":e.value.style.animation.show})},null,10,Ce))),256))])):(a(),s("g",ze,[(a(!0),s(f,null,g(r.value,(l,o)=>(a(),W(re,{plot:{x:l.x+l.width/2,y:l.y+l.height/2},color:e.value.style.bars.colors.gradient.show?l.gradient:l.color,shape:e.value.style.bars.shape,radius:l.height*.4,class:V({"vue-ui-sparkhistogram-shape":e.value.style.animation.show})},null,8,["plot","color","shape","radius","class"]))),256))])),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("text",{"text-anchor":"middle",x:l.textAnchor,y:l.y-e.value.style.labels.value.fontSize/3+e.value.style.labels.value.offsetY,"font-size":e.value.style.labels.value.fontSize,"font-weight":e.value.style.labels.value.bold?"bold":"normal",fill:e.value.style.labels.value.color},b(n(D)(e.value.style.labels.value.formatter,l.value,n(N)({p:e.value.style.labels.value.prefix,v:l.value,s:e.value.style.labels.value.suffix,r:e.value.style.labels.value.rounding}),{datapoint:r.value[i.value],seriesIndex:i.value})),9,Le))),256)),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("g",null,[l.valueLabel?(a(),s("text",{key:0,x:l.textAnchor,y:l.y+l.height+e.value.style.labels.valueLabel.fontSize,"font-size":e.value.style.labels.valueLabel.fontSize,"text-anchor":"middle",fill:e.value.style.labels.valueLabel.color},b(l.valueLabel),9,Se)):p("",!0)]))),256)),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("g",null,[l.timeLabel?(a(),s("text",{key:0,x:l.textAnchor,y:d.value.height-e.value.style.labels.timeLabel.fontSize/2,"font-size":e.value.style.labels.timeLabel.fontSize,fill:e.value.style.labels.timeLabel.color,"text-anchor":"middle"},b(l.timeLabel),9,Me)):p("",!0)]))),256)),(a(!0),s(f,null,g(r.value,(l,o)=>(a(),s("g",null,[c("rect",{height:d.value.height,width:l.unitWidth,fill:"transparent",x:l.trapX,y:0,onMouseover:y=>i.value=o,onMouseleave:u[0]||(u[0]=y=>i.value=null),stroke:i.value!==null&&i.value===o?e.value.style.selector.stroke:"","stroke-width":i.value!==null&&i.value===o?e.value.style.selector.strokeWidth:0,rx:e.value.style.selector.borderRadius,"stroke-dasharray":e.value.style.selector.strokeDasharray,onClick:()=>E(l,o)},null,40,Ae)]))),256))],8,pe)):p("",!0),t.$slots.source?(a(),s("div",He,[ue(t.$slots,"source",{},void 0,!0)],512)):p("",!0),S.value?p("",!0):(a(),W(ne,{key:3,config:{type:"sparkHistogram",style:{backgroundColor:e.value.style.backgroundColor,sparkHistogram:{color:"#CCCCCC"}}}},null,8,["config"]))],36))}},je=de(Be,[["__scopeId","data-v-4e962555"]]);export{je as default};
