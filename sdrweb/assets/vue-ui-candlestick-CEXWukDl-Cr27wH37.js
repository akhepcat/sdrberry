import{z as We,c as h,r as n,D as Ee,H as De,w as me,B as Ge,C as A,ab as ke,b as je,ac as He,ad as Xe,a0 as V,K as Ye,V as qe,N as Je,o as i,a as s,i as N,L as d,j as Ke,l as g,m as p,p as _,q as S,u as x,M as we,n as $e,J as Qe,f as Ce,e as r,a1 as D,P as T,k as L,h as B,ae as Ze,a2 as et,a3 as tt,O as lt,g as at}from"./index-CMbgrvzv.js";import{O as ot,k as it}from"./useResponsive-CoxXLe23-CoJWR8uA.js";import{x as st}from"./Title-DyD-mBPN-B9325m01.js";import{r as ut,a as nt}from"./usePrinter-CLcxWv-4-ChR9zFwY.js";import{E as rt}from"./Tooltip-qod9o4Vz-BM0Op7V-.js";import{W as vt}from"./DataTable-D8fcY_sJ-zOi5rFAi.js";import dt from"./vue-ui-skeleton-Dgzcn3FL-nxJtxydg.js";import{U as yt}from"./Slicer-BLQZ4Fne-BRIrU5yu.js";import ct from"./vue-ui-accordion-m8rut1bP-BPULaFJJ.js";import{c as Ae}from"./useNestedProp-BxrcwmTZ-DfxG55sS.js";import{p as ht}from"./PackageVersion-mSsg8dpu-CbvTnp2w.js";import{S as pt}from"./PenAndPaper-Dk41ZrJ0-Cv0BF8yJ.js";import{s as gt}from"./vue-data-ui-DF7u-eZV-DHaDTFza.js";import"./Shape-DYFnvMNd-6AEzh47f.js";const xt=["id"],ft=["xmlns","viewBox"],bt={key:0},mt=["id"],kt=["stop-color"],wt=["stop-color"],$t=["stop-color"],Ct=["id"],At=["stop-color"],Nt=["stop-color"],zt=["stop-color"],_t={key:0},St=["x1","x2","y1","y2","stroke","stroke-width"],Tt=["x1","x2","y1","y2","stroke","stroke-width"],Lt={key:1},Ft=["x1","x2","y1","y2","stroke","stroke-width"],Rt=["x","y","font-size","fill","font-weight"],Vt={key:2},Bt=["transform","text-anchor","font-size","fill","font-weight"],Ot=["x1","x2","y1","y2","stroke","stroke-width"],It={key:0},Pt=["cx","cy","r","fill"],Mt=["cx","cy","r","fill"],Ut={key:1},Wt=["x1","x2","y1","y2","stroke","stroke-width"],Et=["x1","x2","y1","y2","stroke","stroke-width"],Dt=["x","y","height","width","fill","rx"],Gt=["x","y","height","width","fill","rx","stroke","stroke-width"],jt=["x","y","height","width","fill","onMouseover"],Ht={key:5,class:"vue-data-ui-watermark"},Xt=["innerHTML"],Yt={__name:"vue-ui-candlestick",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},setup($,{expose:Ne}){const k=$,{vue_ui_candlestick:ze}=We(),F=h(()=>!!k.dataset&&k.dataset.length),m=n(Ee()),_e=n(null),G=n(!1),j=n(""),H=n(void 0),K=n(0),z=n(null),Q=n(null),Z=n(null),ee=n(null),te=n(null),le=n(null),O=n(0),ae=n(0),oe=n(0),e=h({get:()=>ie(),set:t=>t});function ie(){const t=Ae({userConfig:k.config,defaultConfig:ze});return t.theme?{...Ae({userConfig:De.vue_ui_candlestick[t.theme]||k.config,defaultConfig:t})}:t}me(()=>k.config,t=>{e.value=ie(),se(),O.value+=1,oe.value+=1,ae.value+=1},{deep:!0}),me(()=>k.dataset,t=>{c.value.start=0,c.value.end=t.length,O.value+=1},{deep:!0});const y=n({height:e.value.style.height,width:e.value.style.width,xAxisFontSize:e.value.style.layout.grid.xAxis.dataLabels.fontSize,yAxisFontSize:e.value.style.layout.grid.yAxis.dataLabels.fontSize}),I=n(null);je(()=>{se()});function se(){if(Ge(k.dataset)&&A({componentName:"VueUiCandlestick",type:"dataset"}),e.value.responsive){const t=ot(()=>{const{width:o,height:l}=it({chart:z.value,title:e.value.style.title.text?Q.value:null,slicer:ee.value,legend:Z.value,source:te.value,noTitle:le.value});y.value.width=o,y.value.height=l,y.value.xAxisFontSize=ke({relator:Math.min(o,l),adjuster:e.value.style.width,source:e.value.style.layout.grid.xAxis.dataLabels.fontSize,threshold:6,fallback:6}),y.value.yAxisFontSize=ke({relator:Math.min(o,l),adjuster:e.value.style.width,source:e.value.style.layout.grid.yAxis.dataLabels.fontSize,threshold:6,fallback:6})});I.value=new ResizeObserver(t),I.value.observe(z.value.parentNode)}}He(()=>{I.value&&I.value.disconnect()});const{isPrinting:ue,isImaging:ne,generatePdf:re,generateImage:ve}=ut({elementId:`vue-ui-candlestick_${m.value}`,fileName:e.value.style.title.text||"vue-ui-candlestick"}),Se=h(()=>e.value.userOptions.show&&!e.value.style.title.text),w=n({showTable:e.value.table.show,showTooltip:e.value.style.tooltip.show}),u=h(()=>{const{top:t,right:o,bottom:l,left:a}=e.value.style.layout.padding;return{top:t,right:y.value.width-o,left:a,bottom:y.value.height-l,width:y.value.width-a-o,height:y.value.height-t-l}}),X=h(()=>k.dataset.length),c=n({start:0,end:X.value}),de=h(()=>k.dataset.slice(c.value.start,c.value.end)),Y=h(()=>(k.dataset.forEach((t,o)=>{[null,void 0].includes(t[0])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"period (index 0)",index:o}),[null,void 0].includes(t[1])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"open (index 1)",index:o}),[null,void 0].includes(t[2])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"high (index 2)",index:o}),[null,void 0].includes(t[3])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"low (index 3)",index:o}),[null,void 0].includes(t[4])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"last (index 4)",index:o}),[null,void 0].includes(t[5])&&A({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"volume (index 5)",index:o})}),de.value.map(t=>({period:t[0],open:t[1],high:t[2],low:t[3],last:t[4],volume:t[5]})))),v=h(()=>u.value.width/de.value.length),ye=h(()=>({max:Math.max(...Y.value.map(t=>t.high)),min:0})),C=h(()=>Xe(ye.value.min,ye.value.max,e.value.style.layout.grid.yAxis.dataLabels.steps));function P(t,o){return{...t,x:V(u.value.left+o*v.value+v.value/2),y:V(u.value.top+(1-t/C.value.max)*u.value.height),value:V(t)}}const f=h(()=>Y.value.map((t,o)=>{const l=P(t.open,o),a=P(t.high,o),b=P(t.low,o),W=P(t.last,o),E=t.last>t.open;return{period:t.period,open:l,high:a,low:b,last:W,volume:t.volume,isBullish:E}}));function Te(t){return V(t/C.value.max)}const Le=h(()=>C.value.ticks.map(t=>({y:u.value.bottom-u.value.height*Te(t),value:V(t)}))),Fe=h(()=>Y.value.map(t=>t.period)),q=n(null);function Re(t,o){H.value=t,q.value={datapoint:o,seriesIndex:t,series:f.value,config:e.value};const l=e.value.style.tooltip.customFormat;if(et(l)&&tt(()=>l({seriesIndex:t,datapoint:o,series:f.value,config:e.value})))j.value=l({seriesIndex:t,datapoint:o,series:f.value,config:e.value});else if(e.value.style.tooltip.show){let a="";const{period:b,open:W,high:E,low:ge,last:xe,volume:fe,isBullish:be}=f.value[t],{period:qt,open:Oe,high:Ie,low:Pe,last:Me,volume:Ue}=e.value.translations;a+=`<div><svg style="margin-right:6px" viewBox="0 0 12 12" height="12" width="12"><rect x="0" y="0" height="12" width="12" rx="${e.value.style.layout.candle.borderRadius*3}" stroke="${e.value.style.layout.candle.stroke}" stroke-width="${e.value.style.layout.candle.strokeWidth}" 
                fill="${e.value.style.layout.candle.gradient.show?be?`url(#bullish_gradient_${m.value})`:`url(#bearish_gradient_${m.value})`:be?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish}"/></svg>${b}</div>`,a+=`${Ue} : <b>${isNaN(fe)?"-":Number(fe.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString()}</b>`,a+=`<div style="margin-top:6px;padding-top:6px;border-top:1px solid ${e.value.style.tooltip.borderColor}">`,a+=`<div>${Oe}: <b>${e.value.style.tooltip.prefix} ${isNaN(W.value)?"-":Number(W.value.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString()} ${e.value.style.tooltip.suffix}</b></div>`,a+=`<div>${Ie}: <b>${e.value.style.tooltip.prefix} ${isNaN(E.value)?"-":Number(E.value.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString()} ${e.value.style.tooltip.suffix}</b></div>`,a+=`<div>${Pe}: <b>${e.value.style.tooltip.prefix} ${isNaN(ge.value)?"-":Number(ge.value.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString()} ${e.value.style.tooltip.suffix}</b></div>`,a+=`<div>${Me}: <b>${e.value.style.tooltip.prefix} ${isNaN(xe.value)?"-":Number(xe.value.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString()} ${e.value.style.tooltip.suffix}</b></div>`,a+="</div>",j.value=`<div style="text-align:right">${a}</div>`}G.value=!0}function Ve(){c.value={start:0,end:X.value},O.value+=1}function ce(){Ye(()=>{const t=[e.value.translations.period,e.value.translations.open,e.value.translations.high,e.value.translations.low,e.value.translations.last,e.value.translations.volume],o=f.value.map(b=>[b.period,b.open.value,b.high.value,b.low.value,b.last.value,b.volume]),l=[[e.value.style.title.text],[e.value.style.title.subtitle.text],[[""],[""],[""]]].concat([t]).concat(o),a=qe(l);Je({csvContent:a,title:e.value.style.title.text||"vue-ui-candlestick"})})}const M=h(()=>{const t=f.value.map(a=>[`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" height="12" width="12" style="margin-right: 6px"><rect x="0" y="0" height="12" width="12" :rx="${e.value.style.layout.candle.borderRadius*3}" fill="${e.value.style.layout.candle.gradient.show?a.isBullish?`url(#bullish_gradient_${m.value}`:`url(#bearish_gradient_${m.value})`:a.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish}"/></svg> ${a.period}`,`${e.value.table.td.prefix} ${isNaN(a.open.value)?"-":Number(a.open.value.toFixed(e.value.table.td.roundingValue)).toLocaleString()} ${e.value.table.td.suffix}`,`${e.value.table.td.prefix} ${isNaN(a.high.value)?"-":Number(a.high.value.toFixed(e.value.table.td.roundingValue)).toLocaleString()} ${e.value.table.td.suffix}`,`${e.value.table.td.prefix} ${isNaN(a.low.value)?"-":Number(a.low.value.toFixed(e.value.table.td.roundingValue)).toLocaleString()} ${e.value.table.td.suffix}`,`${e.value.table.td.prefix} ${isNaN(a.last.value)?"-":Number(a.last.value.toFixed(e.value.table.td.roundingValue)).toLocaleString()} ${e.value.table.td.suffix}`,`${isNaN(a.volume)?"-":a.volume.toLocaleString()}`]),o={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},l=[e.value.translations.period,e.value.translations.open,e.value.translations.high,e.value.translations.low,e.value.translations.last,e.value.translations.volume];return{head:l,body:t,config:o,colNames:l}}),R=n(!1);function Be(t){R.value=t,K.value+=1}function he(){w.value.showTable=!w.value.showTable}function pe(){w.value.showTooltip=!w.value.showTooltip}const U=n(!1);function J(){U.value=!U.value}return Ne({generatePdf:re,generateCsv:ce,generateImage:ve,toggleTable:he,toggleTooltip:pe,toggleAnnotator:J}),(t,o)=>(i(),s("div",{ref_key:"candlestickChart",ref:z,class:$e(`vue-ui-candlestick ${R.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:we(`position:relative;font-family:${e.value.style.fontFamily}; text-align:center;background:${e.value.style.backgroundColor}; ${e.value.responsive?"height: 100%":""}`),id:`vue-ui-candlestick_${m.value}`},[e.value.userOptions.buttons.annotator?(i(),N(pt,{key:0,parent:z.value,backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,active:U.value,onClose:J},null,8,["parent","backgroundColor","color","active"])):d("",!0),Se.value?(i(),s("div",{key:1,ref_key:"noTitle",ref:le,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):d("",!0),e.value.style.title.text?(i(),s("div",{key:2,ref_key:"chartTitle",ref:Q,style:"width:100%;background:transparent"},[(i(),N(st,{key:`title_${oe.value}`,config:{title:{cy:"candlestick-div-title",...e.value.style.title},subtitle:{cy:"candlestick-div-subtitle",...e.value.style.title.subtitle}}},null,8,["config"]))],512)):d("",!0),e.value.userOptions.show&&F.value?(i(),N(nt,{ref_key:"details",ref:_e,key:`user_options_${K.value}`,backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,isImaging:x(ne),isPrinting:x(ue),uid:m.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:R.value,isTooltip:w.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:z.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:U.value,onToggleFullscreen:Be,onGeneratePdf:x(re),onGenerateCsv:ce,onGenerateImage:x(ve),onToggleTable:he,onToggleTooltip:pe,onToggleAnnotator:J},Ke({_:2},[t.$slots.optionTooltip?{name:"optionTooltip",fn:g(()=>[p(t.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:g(()=>[p(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:g(()=>[p(t.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:g(()=>[p(t.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:g(()=>[p(t.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:g(({toggleFullscreen:l,isFullscreen:a})=>[p(t.$slots,"optionFullscreen",_(S({toggleFullscreen:l,isFullscreen:a})),void 0,!0)]),key:"5"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:g(({toggleAnnotator:l,isAnnotator:a})=>[p(t.$slots,"optionAnnotator",_(S({toggleAnnotator:l,isAnnotator:a})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isImaging","isPrinting","uid","hasTooltip","hasPdf","hasImg","hasXls","hasTable","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):d("",!0),F.value?(i(),s("svg",{key:4,xmlns:x(Qe),class:$e({"vue-data-ui-fullscreen--on":R.value,"vue-data-ui-fulscreen--off":!R.value}),viewBox:`0 0 ${y.value.width<=0?10:y.value.width} ${y.value.height<=0?10:y.value.height}`,style:we(`max-width:100%;overflow:visible;background:transparent;color:${e.value.style.color}`)},[Ce(ht),f.value.length>0?(i(),s("g",bt,[r("defs",null,[r("linearGradient",{id:`bearish_gradient_${m.value}`,x2:"0%",y2:"100%"},[r("stop",{offset:"0%","stop-color":e.value.style.layout.candle.colors.bearish},null,8,kt),r("stop",{offset:"50%","stop-color":`${x(D)(e.value.style.layout.candle.colors.bearish,.02)}DE`},null,8,wt),r("stop",{offset:"100%","stop-color":`${x(D)(e.value.style.layout.candle.colors.bearish,.05)}66`},null,8,$t)],8,mt),r("linearGradient",{id:`bullish_gradient_${m.value}`,x2:"0%",y2:"100%"},[r("stop",{offset:"0%","stop-color":e.value.style.layout.candle.colors.bullish},null,8,At),r("stop",{offset:"50%","stop-color":`${x(D)(e.value.style.layout.candle.colors.bullish,.02)}DE`},null,8,Nt),r("stop",{offset:"100%","stop-color":`${x(D)(e.value.style.layout.candle.colors.bullish,.05)}66`},null,8,zt)],8,Ct)]),e.value.style.layout.grid.show?(i(),s("g",_t,[r("line",{x1:u.value.left,x2:u.value.left,y1:u.value.top,y2:u.value.bottom,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,St),r("line",{x1:u.value.left,x2:u.value.right,y1:u.value.bottom,y2:u.value.bottom,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Tt)])):d("",!0),e.value.style.layout.grid.yAxis.dataLabels.show?(i(),s("g",Lt,[(i(!0),s(T,null,L(Le.value,(l,a)=>(i(),s("g",null,[l.value>=C.value.min&&l.value<=C.value.max?(i(),s("line",{key:0,x1:u.value.left,x2:u.value.left-5,y1:l.y,y2:l.y,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Ft)):d("",!0),l.value>=C.value.min&&l.value<=C.value.max?(i(),s("text",{key:1,x:u.value.left-8+e.value.style.layout.grid.yAxis.dataLabels.offsetX,y:l.y+y.value.yAxisFontSize/3,"font-size":y.value.yAxisFontSize,"text-anchor":"end",fill:e.value.style.layout.grid.yAxis.dataLabels.color,"font-weight":e.value.style.layout.grid.yAxis.dataLabels.bold?"bold":"normal"},B(e.value.style.layout.grid.yAxis.dataLabels.prefix)+" "+B(x(Ze)(l.value)?l.value.toFixed(e.value.style.layout.grid.yAxis.dataLabels.roundingValue):"")+" "+B(e.value.style.layout.grid.yAxis.dataLabels.suffix),9,Rt)):d("",!0)]))),256))])):d("",!0),e.value.style.layout.grid.xAxis.dataLabels.show?(i(),s("g",Vt,[(i(!0),s(T,null,L(Fe.value,(l,a)=>(i(),s("g",null,[r("text",{transform:`translate(${u.value.left+v.value*a+v.value/2}, ${u.value.bottom+y.value.xAxisFontSize*2+e.value.style.layout.grid.xAxis.dataLabels.offsetY}), rotate(${e.value.style.layout.grid.xAxis.dataLabels.rotation})`,"text-anchor":e.value.style.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":y.value.xAxisFontSize,fill:e.value.style.layout.grid.xAxis.dataLabels.color,"font-weight":e.value.style.layout.grid.xAxis.dataLabels.bold?"bold":"normal"},B(l),9,Bt)]))),256))])):d("",!0),r("g",null,[(i(!0),s(T,null,L(f.value,(l,a)=>(i(),s("g",null,[r("line",{x1:l.open.x,x2:l.open.x,y1:l.high.y,y2:l.low.y,stroke:e.value.style.layout.wick.stroke,"stroke-width":e.value.style.layout.wick.strokeWidth,"stroke-linecap":"round"},null,8,Ot),e.value.style.layout.wick.extremity.shape==="circle"?(i(),s("g",It,[r("circle",{cx:l.high.x,cy:l.high.y,r:e.value.style.layout.wick.extremity.size==="auto"?v.value/20:e.value.style.layout.wick.extremity.size,fill:e.value.style.layout.wick.extremity.color},null,8,Pt),r("circle",{cx:l.low.x,cy:l.low.y,r:e.value.style.layout.wick.extremity.size==="auto"?v.value/20:e.value.style.layout.wick.extremity.size,fill:e.value.style.layout.wick.extremity.color},null,8,Mt)])):d("",!0),e.value.style.layout.wick.extremity.shape==="line"?(i(),s("g",Ut,[r("line",{x1:l.high.x-(e.value.style.layout.wick.extremity.size==="auto"?v.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,x2:l.high.x+(e.value.style.layout.wick.extremity.size==="auto"?v.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,y1:l.high.y,y2:l.high.y,stroke:e.value.style.layout.wick.extremity.color,"stroke-width":e.value.style.layout.wick.strokeWidth,"stroke-linecap":"round"},null,8,Wt),r("line",{x1:l.low.x-(e.value.style.layout.wick.extremity.size==="auto"?v.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,x2:l.low.x+(e.value.style.layout.wick.extremity.size==="auto"?v.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,y1:l.low.y,y2:l.low.y,stroke:e.value.style.layout.wick.extremity.color,"stroke-width":e.value.style.layout.wick.strokeWidth,"stroke-linecap":"round"},null,8,Et)])):d("",!0)]))),256))]),r("g",null,[(i(!0),s(T,null,L(f.value,(l,a)=>(i(),s("rect",{x:l.open.x-v.value/2+v.value*(1-e.value.style.layout.candle.widthRatio)/2,y:l.isBullish?l.last.y:l.open.y,height:Math.abs(l.last.y-l.open.y)<=0?1e-4:Math.abs(l.last.y-l.open.y),width:v.value*e.value.style.layout.candle.widthRatio<=0?1e-4:v.value*e.value.style.layout.candle.widthRatio,fill:e.value.style.layout.candle.gradient.underlayer,rx:e.value.style.layout.candle.borderRadius,stroke:"none"},null,8,Dt))),256)),(i(!0),s(T,null,L(f.value,(l,a)=>(i(),s("rect",{x:l.open.x-v.value/2+v.value*(1-e.value.style.layout.candle.widthRatio)/2,y:l.isBullish?l.last.y:l.open.y,height:Math.abs(l.last.y-l.open.y)<=0?1e-4:Math.abs(l.last.y-l.open.y),width:v.value*e.value.style.layout.candle.widthRatio<=0?1e-4:v.value*e.value.style.layout.candle.widthRatio,fill:l.isBullish?e.value.style.layout.candle.gradient.show?`url(#bullish_gradient_${m.value})`:e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.gradient.show?`url(#bearish_gradient_${m.value})`:e.value.style.layout.candle.colors.bearish,rx:e.value.style.layout.candle.borderRadius,stroke:e.value.style.layout.candle.stroke,"stroke-width":e.value.style.layout.candle.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,Gt))),256))]),r("g",null,[(i(!0),s(T,null,L(f.value,(l,a)=>(i(),s("rect",{x:u.value.left+a*v.value,y:u.value.top,height:u.value.height<=0?1e-4:u.value.height,width:v.value<=0?1e-4:v.value,fill:H.value===a?x(lt)(e.value.style.layout.selector.color,e.value.style.layout.selector.opacity):"transparent",onMouseover:b=>Re(a,l),onMouseleave:o[0]||(o[0]=b=>{H.value=void 0,G.value=!1})},null,40,jt))),256))])])):d("",!0),p(t.$slots,"svg",{svg:y.value},void 0,!0)],14,ft)):d("",!0),t.$slots.watermark?(i(),s("div",Ht,[p(t.$slots,"watermark",_(S({isPrinting:x(ue)||x(ne)})),void 0,!0)])):d("",!0),F.value?d("",!0):(i(),N(dt,{key:6,config:{type:"candlesticks",style:{backgroundColor:e.value.style.backgroundColor,candlesticks:{axis:{color:"#CCCCCC"},candle:{color:"#CCCCCC"}}}}},null,8,["config"])),e.value.style.zoom.show&&F.value?(i(),s("div",{key:7,ref_key:"chartSlicer",ref:ee},[(i(),N(yt,{key:`slicer_${O.value}`,background:e.value.style.zoom.color,borderColor:e.value.style.backgroundColor,fontSize:e.value.style.zoom.fontSize,useResetSlot:e.value.style.zoom.useResetSlot,labelLeft:$.dataset[c.value.start]?$.dataset[c.value.start][0]:$.dataset[0][0],labelRight:$.dataset[c.value.end-1]?$.dataset[c.value.end-1][0]:$.dataset.at(-1)[0],textColor:e.value.style.color,inputColor:e.value.style.zoom.color,selectColor:e.value.style.zoom.highlightColor,max:X.value,min:0,valueStart:c.value.start,valueEnd:c.value.end,start:c.value.start,"onUpdate:start":o[1]||(o[1]=l=>c.value.start=l),end:c.value.end,"onUpdate:end":o[2]||(o[2]=l=>c.value.end=l),onReset:Ve},{"reset-action":g(({reset:l})=>[p(t.$slots,"reset-action",_(S({reset:l})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"]))],512)):d("",!0),r("div",{ref_key:"chartLegend",ref:Z},[p(t.$slots,"legend",{legend:f.value},void 0,!0)],512),t.$slots.source?(i(),s("div",{key:8,ref_key:"source",ref:te,dir:"auto"},[p(t.$slots,"source",{},void 0,!0)],512)):d("",!0),Ce(rt,{show:w.value.showTooltip&&G.value,backgroundColor:e.value.style.tooltip.backgroundColor,color:e.value.style.tooltip.color,borderRadius:e.value.style.tooltip.borderRadius,borderColor:e.value.style.tooltip.borderColor,borderWidth:e.value.style.tooltip.borderWidth,fontSize:e.value.style.tooltip.fontSize,backgroundOpacity:e.value.style.tooltip.backgroundOpacity,position:e.value.style.tooltip.position,offsetY:e.value.style.tooltip.offsetY,parent:z.value,content:j.value,isCustom:e.value.style.tooltip.customFormat&&typeof e.value.style.tooltip.customFormat=="function"},{"tooltip-before":g(()=>[p(t.$slots,"tooltip-before",_(S({...q.value})),void 0,!0)]),"tooltip-after":g(()=>[p(t.$slots,"tooltip-after",_(S({...q.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isCustom"]),F.value?(i(),N(ct,{key:9,hideDetails:"",config:{open:w.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.backgroundColor,color:e.value.style.color},head:{backgroundColor:e.value.style.backgroundColor,color:e.value.style.color}}},{content:g(()=>[(i(),N(vt,{key:`table_${ae.value}`,colNames:M.value.colNames,head:M.value.head,body:M.value.body,config:M.value.config,title:`${e.value.style.title.text}${e.value.style.title.subtitle.text?` : ${e.value.style.title.subtitle.text}`:""}`,onClose:o[3]||(o[3]=l=>w.value.showTable=!1)},{th:g(({th:l})=>[at(B(l),1)]),td:g(({td:l})=>[r("div",{innerHTML:l},null,8,Xt)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):d("",!0)],14,xt))}},vl=gt(Yt,[["__scopeId","data-v-bec260db"]]);export{vl as default};
