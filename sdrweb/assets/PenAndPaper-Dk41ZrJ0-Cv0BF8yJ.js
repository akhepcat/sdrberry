import{r as i,c as V,I as oe,b as le,K as ae,ac as ne,w as Q,o as d,a as h,n as T,e as F,f as B,M as y,ag as ue,a5 as q,u as K,P as X,k as j,L as W,a7 as re,ar as J,J as se}from"./index-CMbgrvzv.js";import{s as A,u as z}from"./vue-data-ui-DF7u-eZV-DHaDTFza.js";import{t as ie}from"./usePrinter-CLcxWv-4-ChR9zFwY.js";const ce={style:{height:"100%",width:"100%",position:"relative"}},pe={class:"icon"},ve=["onClick"],de={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -46%)"}},he=["value"],ke={__name:"ColorPicker",props:{value:{type:String,default:"#ffffff"},size:{type:String,default:"50px"},backgroundColor:{type:String,default:"#FFFFFF"},buttonBorderColor:{type:String,default:"#FFFFFF"}},emits:["update:value"],setup(n,{emit:R}){const k=n,g=V(()=>({backgroundColor:k.value,width:"100%",height:"100%",cursor:"pointer"})),b=i(null),$=i(!1),_=()=>{var s;(s=b.value)==null||s.click()};function S(s){R("update:value",s),$.value=!1}function w(){$.value=!1}function E(){$.value&&w()}const L=s=>{const M=s.target.value;R("update:value",M)},C=V(()=>ue(k.value));Q(()=>k.value,s=>{b.value.value=s});const x=i(["#000000","#FFFFFF","#FF5733","#33FF57","#3357FF","#FFC300","#800080","#FF1493","#00CED1"]);return(s,M)=>q((d(),h("div",ce,[F("div",{onClick:M[0]||(M[0]=N=>$.value=!$.value),style:y(g.value)},[F("div",pe,[B(z,{name:"palette",stroke:C.value,size:22},null,8,["stroke"])])],4),$.value?(d(),h("div",{key:0,class:"vue-ui-color-picker",style:y({backgroundColor:n.backgroundColor})},[(d(!0),h(X,null,j(x.value,N=>(d(),h("div",{class:"vue-ui-color-picker-option",style:y({backgroundColor:N,outline:`1px solid ${n.buttonBorderColor}`}),onClick:()=>S(N)},null,12,ve))),256)),F("div",{class:"vue-ui-color-picker-option",onClick:_,style:y({backgroundColor:n.value,outline:`1px solid ${n.buttonBorderColor}`})},[F("div",de,[B(z,{name:"colorPicker",stroke:C.value,size:22},null,8,["stroke"])]),F("input",{ref_key:"colorInput",ref:b,type:"color",value:n.value,class:"hidden-input",onInput:L},null,40,he)],4)],4)):W("",!0)])),[[K(ie),E]])}},ge=A(ke,[["__scopeId","data-v-84e6c062"]]),fe={class:T({"vue-ui-pen-and-paper-action":!0}),style:{padding:"0 !important"}},me=["disabled"],Fe=["xmlns","viewBox","onTouchstart","onTouchmove"],be=["cx","cy","r","fill"],$e=["d","stroke","stroke-width"],ye=["d","stroke","stroke-width"],Ce={__name:"PenAndPaper",props:{parent:{type:HTMLElement},backgroundColor:{type:String,default:"#FFFFFF"},color:{type:String,default:"#2D353C"},active:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:R}){const k=n,g=i([]),b=i([]),$=i("0 0 0 0"),_=i(k.color),S=i(1),w=V(()=>oe(k.color,.6));function E({width:o,height:t}){$.value=`0 0 ${o} ${t}`}const L=i(null);le(()=>{ae(()=>{if(k.parent){L.value=new ResizeObserver(e=>{for(const l of e){const{width:a,height:u}=l.contentRect;E({width:a,height:u})}}),L.value.observe(k.parent);const{width:o,height:t}=k.parent.getBoundingClientRect();E({width:o,height:t})}})}),ne(()=>{L.value&&L.value.disconnect()}),Q(()=>k.parent,o=>{if(!o)return;const{width:t,height:e}=k.parent.getBoundingClientRect();E({width:t,height:e})},{immediate:!0});const C=i(!1),x=i(""),s=i(null);function M(o){if(!s.value)return;C.value=!0;const{x:t,y:e}=D(o);x.value=`M ${t} ${e}`}function N(o){if(!C.value||!s.value)return;const{x:t,y:e}=D(o);x.value+=` ${t} ${e}`}function Y(o){const t=o.trim().split(/\s+/);if(t.length<4)return o;const e=t.slice(1).map(Number);if(e.length%2!==0)return o;const l=H(e),a=[`M ${l[0]} ${l[1]}`];for(let c=2;c<l.length-2;c+=2){const f=l[c-2],m=l[c-1],p=l[c],v=l[c+1],I=(f+p)/2,P=(m+v)/2;a.push(`Q ${f} ${m} ${I} ${P}`)}const u=l[l.length-2],r=l[l.length-1];return a.push(`L ${u} ${r}`),a.join(" ")}function H(o,t=1){const e=[...o];for(let l=2;l<o.length-2;l+=2){const a=o[l],u=o[l+1],r=o[l-2],c=o[l-1],f=o[l+2],m=o[l+3];e[l]=a+t*((r+f)/2-a),e[l+1]=u+t*((c+m)/2-u)}return e}function O(o){const t=o.trim().split(/\s+/);let e="",l="",a=null,u=null;for(let r=0;r<t.length;r+=1){const c=t[r];if(isNaN(c)){if(l=c,l==="M"||l==="L")a=parseFloat(t[++r]),u=parseFloat(t[++r]),e+=`${l}${a} ${u}`;else if(l==="Q"){const f=parseFloat(t[++r]),m=parseFloat(t[++r]),p=parseFloat(t[++r]),v=parseFloat(t[++r]);f===a&&m===u?e+=`t${p-a} ${v-u}`:e+=`q${f-a} ${m-u} ${p-a} ${v-u}`,a=p,u=v}}else{const f=parseFloat(c),m=parseFloat(t[++r]);if(l==="L"){const p=f-a,v=m-u;p===0?e+=`v${v}`:v===0?e+=`h${p}`:e+=`l${p} ${v}`,a=f,u=m}else if(l==="Q"){const p=f,v=m,I=parseFloat(t[++r]),P=parseFloat(t[++r]);p===a&&v===u?e+=`t${I-a} ${P-u}`:e+=`q${p-a} ${v-u} ${I-a} ${P-u}`,a=I,u=P}}}return e}function U(){C.value&&(g.value.push({strokeWidth:S.value,path:O(Y(x.value)),color:_.value}),b.value=[],x.value=""),C.value=!1}function D(o){if(!s.value)return{x:0,y:0};const t=s.value.getBoundingClientRect();let e,l;return o.touches&&o.touches.length?(e=o.touches[0].clientX,l=o.touches[0].clientY):(e=o.clientX,l=o.clientY),{x:e-t.left,y:l-t.top}}i(!1);function Z(){if(g.value.length>0){const o=g.value.pop();b.value.push(o)}}function G(){if(b.value.length>0){const o=b.value.pop();g.value.push(o)}}function ee(){g.value=[],b.value=[]}const te=i(null);return(o,t)=>(d(),h(X,null,[n.active?(d(),h("div",{key:0,"data-html2canvas-ignore":"",class:T({"vue-ui-pen-and-paper-actions":!0,visible:n.active})},[F("button",{class:"vue-ui-pen-and-paper-action",style:y({backgroundColor:n.backgroundColor,border:`1px solid ${w.value}`}),onClick:t[0]||(t[0]=e=>R("close"))},[B(z,{name:"close",stroke:n.color},null,8,["stroke"])],4),F("button",fe,[B(ge,{value:_.value,"onUpdate:value":t[1]||(t[1]=e=>_.value=e),backgroundColor:n.backgroundColor,buttonBorderColor:w.value},null,8,["value","backgroundColor","buttonBorderColor"])]),F("button",{class:T({"vue-ui-pen-and-paper-action":!0,"vue-ui-pen-and-paper-action-disabled":!g.value.length}),disabled:!g.value.length,style:y({backgroundColor:n.backgroundColor,border:`1px solid ${w.value}`}),onClick:Z},[B(z,{name:"restart",stroke:n.color},null,8,["stroke"])],14,me),F("button",{class:T({"vue-ui-pen-and-paper-action":!0,"vue-ui-pen-and-paper-action-disabled":!b.value.length}),style:y({backgroundColor:n.backgroundColor,border:`1px solid ${w.value}`}),onClick:G},[B(z,{name:"restart",stroke:n.color,style:{transform:"scaleX(-1)"}},null,8,["stroke"])],6),F("button",{class:T([{"vue-ui-pen-and-paper-action":!0,"vue-ui-pen-and-paper-action-disabled":!g.value.length},"vue-ui-pen-and-paper-action"]),style:y({backgroundColor:n.backgroundColor,border:`1px solid ${w.value}`}),onClick:ee},[B(z,{name:"trash",stroke:n.color},null,8,["stroke"])],6),q(F("input",{ref_key:"range",ref:te,type:"range",class:"vertical-range",min:.5,max:12,step:.1,"onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e),style:y({accentColor:n.color})},null,4),[[re,S.value]])],2)):W("",!0),(d(),h("svg",{ref_key:"svgElement",ref:s,xmlns:K(se),viewBox:$.value,class:T({"vue-ui-pen-and-paper":!0,inactive:!n.active}),onMousedown:M,onMousemove:N,onMouseup:U,onMouseleave:U,onTouchstart:J(M,["prevent"]),onTouchmove:J(N,["prevent"]),onTouchend:U},[(d(!0),h(X,null,j(g.value,e=>(d(),h(X,{key:e},[e.path.replace("M","").split(" ").length===2?(d(),h("circle",{key:0,cx:e.path.replace("M","").split(" ")[0],cy:e.path.replace("M","").split(" ")[1],r:e.strokeWidth/2,fill:e.color},null,8,be)):(d(),h("path",{key:1,class:"vue-ui-pen-and-paper-path",d:e.path,stroke:e.color,"stroke-width":e.strokeWidth,fill:"none"},null,8,$e))],64))),128)),C.value?(d(),h("path",{key:0,class:"vue-ui-pen-and-paper-path vue-ui-pen-and-paper-path-drawing",d:Y(x.value),stroke:_.value,"stroke-width":S.value*1.1,fill:"none"},null,8,ye)):W("",!0)],42,Fe))],64))}},Be=A(Ce,[["__scopeId","data-v-a932b1ac"]]);export{Be as S};
